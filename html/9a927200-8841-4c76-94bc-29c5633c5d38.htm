<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>How To: Compute World and View Matrix using Pose</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="9a927200-8841-4c76-94bc-29c5633c5d38" /><meta name="Description" content="This section explains how a T:DigitalRune.Geometry.Pose can be used to define a World or a View transformation matrix." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">DigitalRune Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="38bd0f53-477c-48c5-91cc-b9fb7062ceb3.htm" title="DigitalRune Documentation" tocid="roottoc">DigitalRune Documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="335dc86a-c68d-4d7b-8641-81dd80de5e76.htm" title="DigitalRune Geometry" tocid="335dc86a-c68d-4d7b-8641-81dd80de5e76">DigitalRune Geometry</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="76e11a96-42a4-495c-b8f8-6164a67d05d5.htm" title="Articles" tocid="76e11a96-42a4-495c-b8f8-6164a67d05d5">Articles</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="833445f6-4042-40e7-a489-0b6ed790428c.htm" title="How To: Add DigitalRune Geometry to a Project" tocid="833445f6-4042-40e7-a489-0b6ed790428c">How To: Add DigitalRune Geometry to a Project</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="9a927200-8841-4c76-94bc-29c5633c5d38.htm" title="How To: Compute World and View Matrix using Pose" tocid="9a927200-8841-4c76-94bc-29c5633c5d38">How To: Compute World and View Matrix using Pose</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="23a00744-a02d-4830-9104-5b978cf74882.htm" title="How To: Compute the Minimal Distance of Objects" tocid="23a00744-a02d-4830-9104-5b978cf74882">How To: Compute the Minimal Distance of Objects</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="20035425-d861-43db-91c2-a4b4d30cbc16.htm" title="How To: Compute Contacts between Objects" tocid="20035425-d861-43db-91c2-a4b4d30cbc16">How To: Compute Contacts between Objects</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="7fc08da6-fe1c-4cfe-ad65-743d08b2b0ba.htm" title="How To: Create a Mesh of a Convex Hull" tocid="7fc08da6-fe1c-4cfe-ad65-743d08b2b0ba">How To: Create a Mesh of a Convex Hull</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="6268b551-b34f-47a4-9513-d7ba700f08fe.htm" title="How To: Load a 3D Collision Model Using the XNA Content Pipeline" tocid="6268b551-b34f-47a4-9513-d7ba700f08fe">How To: Load a 3D Collision Model Using the XNA Content Pipeline</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="138fc8fe-c536-40e0-af6b-0fb7e8eb9623.htm" title="Continuous Collision Detection (Background Information)" tocid="138fc8fe-c536-40e0-af6b-0fb7e8eb9623">Continuous Collision Detection (Background Information)</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="ab8276b7-a27e-43f3-8c23-4b7be065ff91.htm" title="External Articles" tocid="ab8276b7-a27e-43f3-8c23-4b7be065ff91">External Articles</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="DigitalRune" src="../icons/DigitalRune-Logo.png" /></td><td class="titleColumn">How To: Compute World and View Matrix using Pose</td></tr></table><span class="introStyle"></span><div class="introduction"><p>
        This section explains how a <a href="7c0b7cea-0ddc-0f21-0412-731af186b1c8.htm">Pose</a>
        can be used to define a World or a View transformation matrix.
      </p><p>This topic contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#Namespaces">Add DigitalRune namespaces</a></li><li class="outlineSectionEntry"><a href="#World">World matrix</a></li><li class="outlineSectionEntry"><a href="#View">View matrix</a></li><li class="outlineSectionEntry"><a href="#Camera">Controlling a camera</a></li><li class="outlineSectionEntry"><a href="#seeAlsoSection">See Also</a></li></ul></div><div class="collapsibleAreaRegion" id="Namespaces"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Add DigitalRune namespaces</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
          The following example will use data types and helper methods from DigitalRune Geometry and
          Mathematics. The following namespaces must be imported for these examples
          at the beginning of the source code files:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAAEAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAAEAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAAAEAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAAEAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">using</span> DigitalRune.Geometry;
<span class="highlight-keyword">using</span> DigitalRune.Mathematics.Algebra;</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAAEAAA");</script></div><div class="collapsibleAreaRegion" id="World"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />World matrix</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
          When a model is created in a 3D modeler, it is modeled relative to the
          origin. That is, the vertices of the model are defined in local space
          (also known as model space or object space).
        </p><p>
          In a game the model needs to be positioned in the world. In XNA you could
          implement something like this:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACADAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACADAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EACADAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACADAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// A visual object in a game.</span>
<span class="highlight-keyword">class</span> GameObject
{
  <span class="highlight-comment">// The XNA Model that represents the object.</span>
  <span class="highlight-keyword">public</span> Model Model { <span class="highlight-keyword">get</span>; <span class="highlight-keyword">set</span>; }

  <span class="highlight-comment">// The position and orientation of the model in world space.</span>
  <span class="highlight-keyword">public</span> Pose Pose { <span class="highlight-keyword">get</span>; <span class="highlight-keyword">set</span>; }

  ...
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACADAAA");</script><p><strong>Pose</strong> defines the transformation that converts the
          <strong>Model</strong> from local space to world space. When rendering
          the object the pose can be directly assigned to the world matrix of the
          <strong>Effect</strong> used for rendering. (Remember: A pose can be cast
          to an XNA <strong>Matrix</strong>.)
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAADAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAADAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAAADAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAADAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">basicEffect.World = gameObject.Pose;</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAADAAA");</script></div><div class="collapsibleAreaRegion" id="View"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />View matrix</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
          Similarly a camera in an XNA game could be defined like this:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAEACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAEACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAEACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAEACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// A camera in a game.</span>
<span class="highlight-keyword">class</span> Camera
{
  <span class="highlight-comment">// The position and orientation of the camera in world space.</span>
  <span class="highlight-keyword">public</span> Pose Pose { <span class="highlight-keyword">get</span>; <span class="highlight-keyword">set</span>; }

  <span class="highlight-comment">// The projection matrix.</span>
  <span class="highlight-keyword">public</span> Matrix44F Projection { <span class="highlight-keyword">get</span>; <span class="highlight-keyword">set</span>; }

  ...
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAEACAAA");</script><p>
          Now, to render objects we need the view transformation matrix. The view
          matrix transforms an object from world space into view space. The view
          space is the local space of the camera – the camera is in the origin and
          all objects are relative to the camera.
        </p><p>
          How is the view matrix related to <strong>Camera.Pose</strong>?
          <strong>Camera.Pose</strong> transforms the camera from its local
          space to world space. The view matrix transforms objects from world space
          to the local space of that camera. Therefore: <strong>Camera.Pose</strong>
          is the inverse of the view matrix!
        </p><p>
          To render an object you need to assign the inverse of <strong>Pose</strong>
          to the <strong>Effect</strong> used for rendering:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAAACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">basicEffect.View = camera.Pose.Inverse;</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAACAAA");</script></div><div class="collapsibleAreaRegion" id="Camera"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Controlling a camera</span></div><div id="ID4RBSection" class="collapsibleSection"><p>
          In many games the player is able to control the camera directly. If the
          player presses "forward", the camera should move forward along the viewing
          direction.
        </p><p>
          How can we compute the forward direction? In the local space of the camera
          the x-axis points to the right, the y-axis points up and the z-axis points
          towards the viewer. Hence "forward" is (0, 0, –1). To move a camera forward
          in the world we need to transform this direction into world space.
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EACABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">Vector3F forward = camera.Pose.ToWorldDirection(Vector3F.Forward);</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACABAAA");</script><p>
          That’s it! Now we can move the camera along the viewing direction.
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAAABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Move the camera 10 units in the viewing direction.</span>
Pose pose = camera.Pose;
pose.Position += <span class="highlight-number">10</span> * forward;
camera.Pose = pose;</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABAAA");</script></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID5RBSection" class="collapsibleSection"><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="d995ee69-0650-4993-babd-1cdb1fd8fd7a.htm">Pose (Position and Orientation)</a></div></div></div></div><div id="pageFooter" class="pageFooter">Copyright (c) 2006-2016 DigitalRune GmbH. All rights reserved. (Last updated: 2016-03-10)<p><a href="http://www.digitalrune.com/" target="_blank">http://www.digitalrune.com/</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40digitalrune.com?Subject=DigitalRune Documentation">office@digitalrune.com</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>