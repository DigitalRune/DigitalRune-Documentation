<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Post-Processing</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="924e5123-9ed9-4db7-bd0c-2ec8589985ed" /><meta name="Description" content="Image post-processing is the task of improving or altering the scene image after it was rendered." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">DigitalRune Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="38bd0f53-477c-48c5-91cc-b9fb7062ceb3.htm" title="DigitalRune Documentation" tocid="roottoc">DigitalRune Documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="0a8eb9ca-74ae-4746-9289-93d909b07e22.htm" title="DigitalRune Graphics" tocid="0a8eb9ca-74ae-4746-9289-93d909b07e22">DigitalRune Graphics</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="7d5a0abe-8231-452c-895c-e6dbab83822b.htm" title="Graphics Programming" tocid="7d5a0abe-8231-452c-895c-e6dbab83822b">Graphics Programming</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="fda6c965-0105-4a5e-a0db-f8fa6ec4e73f.htm" title="Graphics Service" tocid="fda6c965-0105-4a5e-a0db-f8fa6ec4e73f">Graphics Service</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="2e870374-8980-4fbc-9426-1d1a6e2d9766.htm" title="Graphics Screens" tocid="2e870374-8980-4fbc-9426-1d1a6e2d9766">Graphics Screens</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="4d8c922f-60cb-4b92-a22c-03c9e8816712.htm" title="Scene Management" tocid="4d8c922f-60cb-4b92-a22c-03c9e8816712">Scene Management</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="6b3a13bc-37b4-4820-9f82-c2364a9ed2eb.htm" title="Rendering" tocid="6b3a13bc-37b4-4820-9f82-c2364a9ed2eb">Rendering</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="ba1be841-af9c-41a4-8348-0b6bd92efdd9.htm" title="Effects and Effect Bindings" tocid="ba1be841-af9c-41a4-8348-0b6bd92efdd9">Effects and Effect Bindings</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="34a7f065-df4f-4f40-8b5c-5f0afee365db.htm" title="Materials and Material Instances" tocid="34a7f065-df4f-4f40-8b5c-5f0afee365db">Materials and Material Instances</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="cb08d0d8-8ea6-49fc-b318-b185dbb70608.htm" title="Models and Meshes" tocid="cb08d0d8-8ea6-49fc-b318-b185dbb70608">Models and Meshes</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="fda1f969-9b64-4851-873c-a59466ac69ba.htm" title="Cameras" tocid="fda1f969-9b64-4851-873c-a59466ac69ba">Cameras</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="e316a87e-0cdb-4c6b-bcb0-a2e66004c26f.htm" title="Lights" tocid="e316a87e-0cdb-4c6b-bcb0-a2e66004c26f">Lights</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="3f82c46b-efec-4416-807f-670ac1930117.htm" title="Shadows" tocid="3f82c46b-efec-4416-807f-670ac1930117">Shadows</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="630fb69e-a032-4125-bdc0-5484fbe2c86d.htm" title="Lens Flares" tocid="630fb69e-a032-4125-bdc0-5484fbe2c86d">Lens Flares</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="f782dc86-40e9-45c1-869a-4baf86e28ed9.htm" title="Decals" tocid="f782dc86-40e9-45c1-869a-4baf86e28ed9">Decals</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="4518dd2c-21ea-4cf8-8dec-8b3a32584743.htm" title="Billboards and Particles" tocid="4518dd2c-21ea-4cf8-8dec-8b3a32584743">Billboards and Particles</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="d4d56ebf-a623-492c-bd37-b41a2979323e.htm" title="Sprites (Images and Text)" tocid="d4d56ebf-a623-492c-bd37-b41a2979323e">Sprites (Images and Text)</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="d70873e7-1dbc-492b-b10d-1afb6f06687a.htm" title="Figures (Lines, 2D Shapes)" tocid="d70873e7-1dbc-492b-b10d-1afb6f06687a">Figures (Lines, 2D Shapes)</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="0bc6a222-64d5-4642-a2b6-241e9017c873.htm" title="Fog" tocid="0bc6a222-64d5-4642-a2b6-241e9017c873">Fog</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="975dcbca-5c87-4f33-a372-0cfe7f50cebe.htm" title="Sky" tocid="975dcbca-5c87-4f33-a372-0cfe7f50cebe">Sky</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="46f261f5-750c-4df5-99e2-b6a289f15098.htm" title="Terrain" tocid="46f261f5-750c-4df5-99e2-b6a289f15098">Terrain</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="5697f90f-2893-4ed5-ae66-da63afccdfc3.htm" title="Water" tocid="5697f90f-2893-4ed5-ae66-da63afccdfc3">Water</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="924e5123-9ed9-4db7-bd0c-2ec8589985ed.htm" title="Post-Processing" tocid="924e5123-9ed9-4db7-bd0c-2ec8589985ed">Post-Processing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b7e96cd7-c737-4805-b5a9-98f1e8acd1d5.htm" title="Anti-Aliasing" tocid="b7e96cd7-c737-4805-b5a9-98f1e8acd1d5">Anti-Aliasing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b320aebd-46a0-45d8-8edb-0c717152a56b.htm" title="Level of Detail (LOD)" tocid="b320aebd-46a0-45d8-8edb-0c717152a56b">Level of Detail (LOD)</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="cc20d61e-83cb-46c7-a2e2-0841a35043ba.htm" title="Occlusion Culling" tocid="cc20d61e-83cb-46c7-a2e2-0841a35043ba">Occlusion Culling</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="7fbfaba5-af8d-4bf7-b5c3-6c084e1bfc54.htm" title="Windows Forms, WPF, UWP Interoperability" tocid="7fbfaba5-af8d-4bf7-b5c3-6c084e1bfc54">Windows Forms, WPF, UWP Interoperability</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="4e6f5dc1-8897-466f-88f2-b5c56d43a3c5.htm" title="Miscellaneous" tocid="4e6f5dc1-8897-466f-88f2-b5c56d43a3c5">Miscellaneous</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="DigitalRune" src="../icons/DigitalRune-Logo.png" /></td><td class="titleColumn">Post-Processing</td></tr></table><span class="introStyle"></span><div class="introduction"><p>
                Image post-processing is the task of improving or altering the scene image after it was
                rendered.
            </p><p>This topic contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#PostProcessor">What is a post-processor?</a></li><li class="outlineSectionEntry"><a href="#Nesting">Nesting of post-processors</a></li><li class="outlineSectionEntry"><a href="#Chaining">Chaining of post-processors</a></li><li class="outlineSectionEntry"><a href="#RenderStates">Render states and alpha blending</a></li><li class="outlineSectionEntry"><a href="#SSAO">Screen-Space Ambient Occlusion (SSAO)</a></li></ul></div><div class="collapsibleAreaRegion" id="PostProcessor"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />What is a post-processor?</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
                    The namespace <a href="d662a10a-44c3-7086-5f0e-685a7bfa8453.htm">DigitalRune.Graphics.PostProcessing</a>
                    contains a variety of post-process filters (base class <a href="f7fcf99a-3d5b-f8fe-85a3-ce09929bb71c.htm">PostProcessor</a>).
                </p><p>
                    A post-processor in DigitalRune Graphics is simply a class that performs an operation on
                    one (or more) textures and writes the result to a render target:
                </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACAFAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACAFAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EACAFAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACAFAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Define source texture (= input) and render target (= output).</span>
context.SourceTexture = sourceTexture;
context.RenderTarget = renderTarget;
context.Viewport = <span class="highlight-keyword">new</span> Viewport(<span class="highlight-number">0</span>, <span class="highlight-number">0</span>, renderTarget.Width, renderTarget.Height);

<span class="highlight-comment">// Apply post-processing.</span>
postProcessor.Process(context);</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACAFAAA");</script><p>
                    The
                    <a href="ea575bf4-8a2a-e02a-be92-c5821bff1ad7.htm">RenderContext</a>
                    is used to define the input texture, the output render target and the viewport in the
                    output render target.
                    The method <a href="50796eb8-15db-cace-9ff5-1d5b80b4ddda.htm">Process</a>
                    reads the specified source texture, performs the post-process operation and writes the result
                    to the specified viewport in the render target (or the back buffer if the render target is
                    <span class="code">null</span>).
                </p><p>
                    Certain post-processors require additional parameters. For example, the
                    <a href="719d24f3-fc67-15b4-a229-d682d25d00df.htm">DepthOfFieldFilter</a>
                    expects that the depth buffer of the current scene is set in the render context (property
                    <a href="60b28c3f-8979-b94f-e6fa-1f5c9043f767.htm">GBuffer0</a>).
                    The <a href="b2c42602-33df-b400-0697-da8849f480e9.htm">ObjectMotionBlur</a>
                    requires a texture containing the motion vectors of the scene stored in
                    <span class="code">RenderContext.Data[RenderContextKeys.VelocityBuffer]</span>.
                    Make sure to read the documentation of the individual post-processors.
                </p></div><div class="collapsibleAreaRegion" id="Nesting"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Nesting of post-processors</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
                    Post-process operations can be nested: A post-processor can internally use other
                    post-processors.
                </p></div><div class="collapsibleAreaRegion" id="Chaining"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Chaining of post-processors</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
                    Modern games usually perform a series of post-process operation on the scene image.
                    Post-process operation can be linked together using a
                    <a href="441ab431-4432-32a0-a044-1585618b0e0f.htm">PostProcessorChain</a>.
                    The <a href="441ab431-4432-32a0-a044-1585618b0e0f.htm">PostProcessorChain</a>
                    is a collection of post-processors that are executed in sequence. The output of the
                    previous post-processor is the input of the next post-processor in the list.
                </p><p>
                    To change the image format (e.g. size or surface format) within the post-processor chain, post-processors have a
                    <a href="1af47241-4d3d-5480-3b31-b960df6779ed.htm">DefaultTargetFormat</a>
                    property. For example, this is used by the
                    <a href="669fe850-e5ad-7d15-7fb7-7a0821277117.htm">HdrFilter</a>
                    to convert a <strong>HdrBlendable</strong> input texture to an LDR <strong>Color</strong>
                    (R8G8B8A8) texture.
                </p><p>
                    The <a href="441ab431-4432-32a0-a044-1585618b0e0f.htm">PostProcessorChain</a>
                    is derived from <a href="f7fcf99a-3d5b-f8fe-85a3-ce09929bb71c.htm">PostProcessor</a>
                    and can be treated the same way as any other post-processor.
                </p></div><div class="collapsibleAreaRegion" id="RenderStates"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Render states and alpha blending</span></div><div id="ID4RBSection" class="collapsibleSection"><p>
                    Post-processors use the rasterizer state <strong>CullNone</strong> and the
                    depth-stencil state <strong>None</strong> (depth-buffer disabled). It is not
                    necessary to set the rasterize state or the depth-stencil state before calling a
                    post-processor.
                </p><p>
                    Post-processors in a
                    <a href="441ab431-4432-32a0-a044-1585618b0e0f.htm">PostProcessorChain</a>
                    use the blend state <strong>Opaque</strong>.
                    When a single post-processor is executed, the blend state must be set explicitly.
                    Most post-processors require a blend state of <strong>Opaque</strong> but some
                    post-processors can be used with different blend states. For example, the
                    <a href="543aa986-c0d9-e764-4530-94f4a78711e9.htm">CopyFilter</a>
                    can be used to blend a source texture to the current render target:
                </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAAACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">context.SourceTexture = sourceTexture;
context.RenderTarget = renderTarget;
context.Viewport = <span class="highlight-keyword">new</span> Viewport(<span class="highlight-number">0</span>, <span class="highlight-number">0</span>, renderTarget.Width, renderTarget.Height);
device.BlendState = GraphicsHelper.BlendStateMultiply;
_copyFilter.Process(context);</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAACAAA");</script></div><div class="collapsibleAreaRegion" id="SSAO"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Screen-Space Ambient Occlusion (SSAO)</span></div><div id="ID5RBSection" class="collapsibleSection"><p><span class="term">Screen-Space Ambient Occlusion</span> (SSAO) is a real-time approximation
                    technique for <span class="term">ambient occlusion</span>, which is implemented as a post-process
                    filter (see <a href="235256b2-4491-9a1d-dce2-2558bdb44385.htm">SsaoFilter</a>).
                </p><p>
                    SSAO can be applied to the final scene image. However, in a deferred lighting pipeline the
                    it is usually applied directly to the diffuse light buffer (before the material pass).
                    See the <em>DeferredLightingSample</em> for more information.
                </p></div></div></div><div id="pageFooter" class="pageFooter">Copyright (c) 2006-2016 DigitalRune GmbH. All rights reserved. (Last updated: 2016-03-10)<p><a href="http://www.digitalrune.com/" target="_blank">http://www.digitalrune.com/</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40digitalrune.com?Subject=DigitalRune Documentation">office@digitalrune.com</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>