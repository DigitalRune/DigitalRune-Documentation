<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Design Notes</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="6f2fd7a2-0d47-4a6d-a833-14b1fe62e0a9" /><meta name="Description" content="This section discusses the motivation behind the design of DigitalRune Particles." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">DigitalRune Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="38bd0f53-477c-48c5-91cc-b9fb7062ceb3.htm" title="DigitalRune Documentation" tocid="roottoc">DigitalRune Documentation</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="5044112e-c86d-4d85-87d0-b567a0361c21.htm" title="DigitalRune Particles" tocid="5044112e-c86d-4d85-87d0-b567a0361c21">DigitalRune Particles</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="6f2fd7a2-0d47-4a6d-a833-14b1fe62e0a9.htm" title="Design Notes" tocid="6f2fd7a2-0d47-4a6d-a833-14b1fe62e0a9">Design Notes</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="7fffe522-a53c-4944-979f-8646dc41ac9a.htm" title="Particle Systems, Parameters and Effectors" tocid="7fffe522-a53c-4944-979f-8646dc41ac9a">Particle Systems, Parameters and Effectors</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="678bfb4e-070d-4322-80d6-3367d6fdec68.htm" title="Multithreading" tocid="678bfb4e-070d-4322-80d6-3367d6fdec68">Multithreading</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="25e7a7a0-265e-4c12-9e41-be23852b39cf.htm" title="&quot;How To&quot; Articles" tocid="25e7a7a0-265e-4c12-9e41-be23852b39cf">"How To" Articles</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b113ef19-247b-4731-b704-1f4855dccfc0.htm" title="FAQ" tocid="b113ef19-247b-4731-b704-1f4855dccfc0">FAQ</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="ab3315a0-7863-4311-abb5-b0ae31198a06.htm" title="Class Diagrams" tocid="ab3315a0-7863-4311-abb5-b0ae31198a06">Class Diagrams</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="DigitalRune" src="../icons/DigitalRune-Logo.png" /></td><td class="titleColumn">Design Notes</td></tr></table><span class="introStyle"></span><div class="introduction"><p>This section discusses the motivation behind the design of DigitalRune Particles.</p></div><div class="collapsibleAreaRegion" id="Notes"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Design notes</span></div><div id="ID0RBSection" class="collapsibleSection"><h4 class="subHeading" id="cpubased">CPU-based</h4><div class="subsection"><p>
                            DigitalRune Particles v1.0 was designed as a <em>CPU-based</em>
                            particle system that allows to create complex particle effects. For a CPU-based
                            particle engine, <em>flexibility</em> is more important than
                            raw performance. In DigitalRune Particles it is easy to define new particle states
                            and create complex particle behaviors.
                        </p><p>
                            Another benefit of a CPU-based particle system: It is independent of the graphics
                            API and graphics engine and can be integrated in many different applications.
                        </p><p>
                            The drawback of a CPU-based particle system is that it is slower than a
                            GPU-based particle system, especially in .NET where SIMD hardware extensions
                            of most CPUs are not available.
                            If an application needs to render a large scale effect (e.g. heavy rain or snow)
                            or requires maximum performance, the particle effect can be designed using
                            DigitalRune Particles. Then the final effect can be manually ported to run on the
                            GPU.
                        </p></div><h4 class="subHeading" id="parameters">Particle parameters</h4><div class="subsection"><p>
                            Most particle engines provide a fixed set of parameters for particles (e.g.
                            Position, Speed, Direction, Size, Angle, ...), or they require to create a new
                            particle struct/class for each new type of particles. In addition, effectors
                            (objects that manipulate particles) work only for specific particle parameters.
                        </p><p>
                            Such a design is limiting. If a visual effects designer wants to try a new
                            effect where he needs a new parameter (e.g. Shininess), a new particle class
                            has to be created - or often it is not possible to add a new parameter at all.
                            And if particle effectors are not flexible to work with different particle
                            parameters, a new particle effector has to be created (e.g. a ShininessInterpolator
                            has to be created because the AlphaInterpolator cannot be used with any other
                            parameters than Alpha.)
                        </p><p>
                            Predefined particle types can also waste a lot of memory because most particle
                            effects will not need all predefined particle parameters.
                        </p><p>
                            In DigitalRune Particles, particles have only one predefined particle parameter: NormalizedAge.
                            All other parameters (such as Position, Speed, Direction, Size, Angle, Mass, Restitution,
                            Gravity, Texture, Color, etc.) can be added and interpreted by the user as needed
                            (for example, Size can be a scalar value or a 2D vector).
                            Particle effectors can be configured to work with any particle parameter
                            (e.g. a SingleLerpEffector can linearly interpolate any single-precision
                            floating point parameter, like Alpha or Size).
                        </p><p>
                            It is possible to create particle parameters where each particle has its
                            own value (called "varying parameters") or where all particles share the same
                            value (called "uniform parameters"). For example, in one particle effect each
                            particle has its own random Size value. In another particle system all particles
                            can share the same Size value.
                        </p><p>
                            Uniform particle parameters store only a single value for the whole particle
                            system. Varying particle parameters store an array of values. These arrays
                            are preallocated for a maximal particle number and used as circular buffers.
                        </p><p>
                            This <em>Structure of Arrays</em> approach saves memory
                            because only arrays for the required varying particle parameters need to be allocated.
                            It is also more <em>cache friendly</em> because most particle
                            effectors operate only on one particle parameter or on a small subset of particle parameters.
                            The particle effectors do not need to load the whole particle structures -  only the
                            required parameters.
                        </p></div></div></div></div><div id="pageFooter" class="pageFooter">Copyright (c) 2006-2016 DigitalRune GmbH. All rights reserved. (Last updated: 2016-03-10)<p><a href="http://www.digitalrune.com/" target="_blank">http://www.digitalrune.com/</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40digitalrune.com?Subject=DigitalRune Documentation">office@digitalrune.com</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>