<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Level of Detail (LOD)</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="b320aebd-46a0-45d8-8edb-0c717152a56b" /><meta name="Description" content="Level of Detail (LOD) can be used to improve the render performance of distant objects." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">DigitalRune Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="38bd0f53-477c-48c5-91cc-b9fb7062ceb3.htm" title="DigitalRune Documentation" tocid="roottoc">DigitalRune Documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="0a8eb9ca-74ae-4746-9289-93d909b07e22.htm" title="DigitalRune Graphics" tocid="0a8eb9ca-74ae-4746-9289-93d909b07e22">DigitalRune Graphics</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="7d5a0abe-8231-452c-895c-e6dbab83822b.htm" title="Graphics Programming" tocid="7d5a0abe-8231-452c-895c-e6dbab83822b">Graphics Programming</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="fda6c965-0105-4a5e-a0db-f8fa6ec4e73f.htm" title="Graphics Service" tocid="fda6c965-0105-4a5e-a0db-f8fa6ec4e73f">Graphics Service</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="2e870374-8980-4fbc-9426-1d1a6e2d9766.htm" title="Graphics Screens" tocid="2e870374-8980-4fbc-9426-1d1a6e2d9766">Graphics Screens</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="4d8c922f-60cb-4b92-a22c-03c9e8816712.htm" title="Scene Management" tocid="4d8c922f-60cb-4b92-a22c-03c9e8816712">Scene Management</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="6b3a13bc-37b4-4820-9f82-c2364a9ed2eb.htm" title="Rendering" tocid="6b3a13bc-37b4-4820-9f82-c2364a9ed2eb">Rendering</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="ba1be841-af9c-41a4-8348-0b6bd92efdd9.htm" title="Effects and Effect Bindings" tocid="ba1be841-af9c-41a4-8348-0b6bd92efdd9">Effects and Effect Bindings</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="34a7f065-df4f-4f40-8b5c-5f0afee365db.htm" title="Materials and Material Instances" tocid="34a7f065-df4f-4f40-8b5c-5f0afee365db">Materials and Material Instances</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="cb08d0d8-8ea6-49fc-b318-b185dbb70608.htm" title="Models and Meshes" tocid="cb08d0d8-8ea6-49fc-b318-b185dbb70608">Models and Meshes</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="fda1f969-9b64-4851-873c-a59466ac69ba.htm" title="Cameras" tocid="fda1f969-9b64-4851-873c-a59466ac69ba">Cameras</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="e316a87e-0cdb-4c6b-bcb0-a2e66004c26f.htm" title="Lights" tocid="e316a87e-0cdb-4c6b-bcb0-a2e66004c26f">Lights</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="3f82c46b-efec-4416-807f-670ac1930117.htm" title="Shadows" tocid="3f82c46b-efec-4416-807f-670ac1930117">Shadows</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="630fb69e-a032-4125-bdc0-5484fbe2c86d.htm" title="Lens Flares" tocid="630fb69e-a032-4125-bdc0-5484fbe2c86d">Lens Flares</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="f782dc86-40e9-45c1-869a-4baf86e28ed9.htm" title="Decals" tocid="f782dc86-40e9-45c1-869a-4baf86e28ed9">Decals</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="4518dd2c-21ea-4cf8-8dec-8b3a32584743.htm" title="Billboards and Particles" tocid="4518dd2c-21ea-4cf8-8dec-8b3a32584743">Billboards and Particles</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="d4d56ebf-a623-492c-bd37-b41a2979323e.htm" title="Sprites (Images and Text)" tocid="d4d56ebf-a623-492c-bd37-b41a2979323e">Sprites (Images and Text)</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="d70873e7-1dbc-492b-b10d-1afb6f06687a.htm" title="Figures (Lines, 2D Shapes)" tocid="d70873e7-1dbc-492b-b10d-1afb6f06687a">Figures (Lines, 2D Shapes)</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="0bc6a222-64d5-4642-a2b6-241e9017c873.htm" title="Fog" tocid="0bc6a222-64d5-4642-a2b6-241e9017c873">Fog</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="975dcbca-5c87-4f33-a372-0cfe7f50cebe.htm" title="Sky" tocid="975dcbca-5c87-4f33-a372-0cfe7f50cebe">Sky</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="46f261f5-750c-4df5-99e2-b6a289f15098.htm" title="Terrain" tocid="46f261f5-750c-4df5-99e2-b6a289f15098">Terrain</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="5697f90f-2893-4ed5-ae66-da63afccdfc3.htm" title="Water" tocid="5697f90f-2893-4ed5-ae66-da63afccdfc3">Water</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="924e5123-9ed9-4db7-bd0c-2ec8589985ed.htm" title="Post-Processing" tocid="924e5123-9ed9-4db7-bd0c-2ec8589985ed">Post-Processing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b7e96cd7-c737-4805-b5a9-98f1e8acd1d5.htm" title="Anti-Aliasing" tocid="b7e96cd7-c737-4805-b5a9-98f1e8acd1d5">Anti-Aliasing</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="b320aebd-46a0-45d8-8edb-0c717152a56b.htm" title="Level of Detail (LOD)" tocid="b320aebd-46a0-45d8-8edb-0c717152a56b">Level of Detail (LOD)</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="cc20d61e-83cb-46c7-a2e2-0841a35043ba.htm" title="Occlusion Culling" tocid="cc20d61e-83cb-46c7-a2e2-0841a35043ba">Occlusion Culling</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="7fbfaba5-af8d-4bf7-b5c3-6c084e1bfc54.htm" title="Windows Forms, WPF, UWP Interoperability" tocid="7fbfaba5-af8d-4bf7-b5c3-6c084e1bfc54">Windows Forms, WPF, UWP Interoperability</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="4e6f5dc1-8897-466f-88f2-b5c56d43a3c5.htm" title="Miscellaneous" tocid="4e6f5dc1-8897-466f-88f2-b5c56d43a3c5">Miscellaneous</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="DigitalRune" src="../icons/DigitalRune-Logo.png" /></td><td class="titleColumn">Level of Detail (LOD)</td></tr></table><span class="introStyle"></span><div class="introduction"><p><span class="term">Level of Detail</span> (LOD) can be used to improve the render performance of
                distant objects.
            </p><p>This topic contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#Definition">Defining LOD</a></li><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#Code">Creating LOD in code</a></li><li class="outlineSectionEntry"><a href="#Content">Importing LOD using content pipeline</a></li><li class="outlineSectionEntry"><a href="#Settings">LOD settings</a></li></ul><li class="outlineSectionEntry"><a href="#Integration">Integrating LOD into a game</a></li><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#Blending">LOD blending</a></li></ul><li class="outlineSectionEntry"><a href="#FurtherReading">Further Reading</a></li></ul></div><div class="collapsibleAreaRegion" id="Definition"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Defining LOD</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
                    The <a href="3245d6a2-5855-981a-7118-5eef2136de75.htm">LodGroupNode</a>
                    represents an objects with multiple levels of detail (LODs). It stores a collection of LODs
                    (see property <a href="f58d1e61-ecd5-1cb4-c1e5-9fbdf5be5400.htm">Levels</a>).
                    A LOD is defined by its LOD distance and a LOD node:
                </p><ul><li><p><a href="afbc4df6-dc10-4ec5-e1df-c1e1092d15ad.htm">Distance</a>:
                            The <span class="term">LOD distance</span> is the threshold distance at which the engine
                            switches to this LOD. All distances are "view-normalized" distances. This means that
                            distance values are corrected based on the camera's field of view. The resulting LOD
                            distances are independent of the current field of view. See
                            <a href="a204cc30-6ace-d484-7adf-acbb01dff688.htm">GraphicsHelper<span id="LSTBC82096E_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBC82096E_0?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>GetViewNormalizedDistance</a>
                            for more information.
                        </p></li><li><p><a href="56560f7b-b2ae-ee21-b143-62ce1d0b8b69.htm">Node</a>:
                            The <span class="term">LOD node</span> is a scene node that represents this LOD. In most cases
                            this is a single node (typically a
                            <a href="150b5feb-ef12-d0be-cd27-0a32759af0ba.htm">MeshNode</a>),
                            but it can also be a tree of scene nodes.
                            <a href="3245d6a2-5855-981a-7118-5eef2136de75.htm">LodGroupNode</a>s
                            can even be nested, i.e. a LOD node may contain other
                            <a href="3245d6a2-5855-981a-7118-5eef2136de75.htm">LodGroupNode</a>s.
                        </p></li></ul><div class="mediaNear"><img alt="DigitalRune.Graphics (Level of Detail)" src="../media/Graphics_LOD.png" /><div class="caption">Class diagram: level of detail</div></div><h4 class="subHeading" id="Code">Creating LOD in code</h4><div class="subsection"><p>
                            Creating a new <a href="3245d6a2-5855-981a-7118-5eef2136de75.htm">LodGroupNode</a>
                            in code is simple:
                        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EABACADAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EABACADAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EABACADAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EABACADAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">var</span> lodGroupNode = <span class="highlight-keyword">new</span> LodGroupNode();
lodGroupNode.Levels.Add(<span class="highlight-number">0</span>, meshNode0);  <span class="highlight-comment">// Maximal details (LOD0)</span>
lodGroupNode.Levels.Add(<span class="highlight-number">3</span>, meshNode1);  <span class="highlight-comment">// Medium details (LOD1)</span>
lodGroupNode.Levels.Add(<span class="highlight-number">8</span>, meshNode2);  <span class="highlight-comment">// Minimum details (LOD2)</span>
lodGroupNode.MaxDistance = <span class="highlight-number">20</span>;          <span class="highlight-comment">// Optional: Maximum draw distance</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EABACADAAA");</script><p>
                            The LODs are automatically sorted by distance - they can be added or removed in any order.
                        </p></div><h4 class="subHeading" id="Content">Importing LOD using content pipeline</h4><div class="subsection"><p>
                            The content pipeline supports models with LOD. See
                            <a href="1bb7c46b-886a-4cca-a16d-f5f2a16e239f.htm">Level of Detail</a></p></div><h4 class="subHeading" id="Settings">LOD settings</h4><div class="subsection"><p>
                            LOD settings are stored in the <a href="6f7dfd61-f6ec-e574-446d-2a0396a95bad.htm">CameraNode</a>
                            and the <a href="ea575bf4-8a2a-e02a-be92-c5821bff1ad7.htm">RenderContext</a>.
                        </p><h4 class="subHeading" id="Camera">LOD camera</h4><div class="subsection"><p>
                                    LOD selection depends on the camera field of view and the distance of an object from the
                                    camera. The property <a href="fd0935c3-e5f6-fd1d-5f9d-47b8d222e2f7.htm">RenderContext<span id="LSTBC82096E_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBC82096E_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>LodCameraNode</a>
                                    defines the camera that is used as a reference for all LOD calculations. The properties
                                    <a href="324769e9-33d4-bc99-cf3a-671dd7715d2f.htm">CameraNode</a>
                                    and <a href="fd0935c3-e5f6-fd1d-5f9d-47b8d222e2f7.htm">LodCameraNode</a>
                                    usually reference the same camera instance. LOD calculations will fail if the
                                    <a href="fd0935c3-e5f6-fd1d-5f9d-47b8d222e2f7.htm">LodCameraNode</a>
                                    is not set.
                                </p><p>
                                    Note that
                                    <a href="324769e9-33d4-bc99-cf3a-671dd7715d2f.htm">RenderContext<span id="LSTBC82096E_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBC82096E_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CameraNode</a>
                                    and
                                    <a href="fd0935c3-e5f6-fd1d-5f9d-47b8d222e2f7.htm">RenderContext<span id="LSTBC82096E_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBC82096E_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>LodCameraNode</a>
                                    are two different properties. The currently active camera is not necessarily
                                    the same camera that is used in LOD computations. This distinction is, for
                                    example, important when rendering shadow maps.
                                </p></div><h4 class="subHeading" id="Bias">LOD bias</h4><div class="subsection"><p>
                                    The <span class="term">LOD bias</span> is an additional factor that can be set globally (see
                                    <a href="5c000afc-6ea1-c1a1-d082-d0f257016659.htm">RenderContext<span id="LSTBC82096E_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBC82096E_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>LodBias</a>)
                                    or per camera (see <a href="1893874b-ea0f-342b-1d5d-a173c3ce9e8c.htm">CameraNode<span id="LSTBC82096E_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBC82096E_5?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>LodBias</a>).
                                    These factors are multiplied to the LOD distance of a scene node. They can be used to
                                    increase or decrease the level of detail based on scene, performance, platform, quality
                                    settings or other criteria.
                                </p><p>
                                    The default LOD bias is 1. A factor of 0 forces all objects to be rendered with
                                    the highest level of detail. A large factor, such as ∞, forces all objects to be
                                    drawn with the lowest level of detail.
                                </p><p>Example uses:</p><ul><li>
                                        The LOD bias can be increased during computationally intensive scenes
                                        (e.g. large number of objects or characters on screen) to improve
                                        performance.
                                    </li><li>
                                        During cut-scenes the LOD bias can be decreased to improve quality.
                                    </li><li>
                                        The LOD bias of fast moving cameras or secondary cameras can be increased.
                                    </li><li>
                                        The LOD bias can be increased or decreased based on the game's
                                        quality settings.
                                    </li><li>
                                        Different LOD biases can be used for different platforms (e.g. PC vs.
                                        mobile platforms).
                                    </li><li>
                                        The LOD bias can also be used to account for different screen
                                        resolutions. This can be necessary because the chosen LOD metric is
                                        independent of the resolution.
                                    </li></ul></div><h4 class="subHeading" id="Hysteresis">LOD hysteresis</h4><div class="subsection"><p>
                                    The <span class="term">LOD hysteresis</span> adds a
                                    <a href="http://en.wikipedia.org/wiki/Hysteresis" target="_blank">hysteresis</a>
                                    to LOD switches (see <a href="cdab8ef9-bcf8-2a77-9d06-b11eb48ce45f.htm">RenderContext<span id="LSTBC82096E_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBC82096E_6?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>LodHysteresis</a>).
                                    Instead of switching between LODs at a certain threshold distance, the
                                    distance for switching to the lower LOD is further away than the threshold distance and
                                    the distance for switching to the higher LOD is closer. This is a common technique used to
                                    reduce LOD popping.
                                </p><p>
                                    Example: The LOD distance for LOD2 is 100. With an LOD hysteresis of 10, the object
                                    transitions from LOD1 to LOD2 at distance 105, and from LOD2 to LOD1 at distance 95.
                                </p></div></div></div><div class="collapsibleAreaRegion" id="Integration"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Integrating LOD into a game</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
                    The
                    <a href="e79b2fa4-d731-66fe-ba4f-d8e58e557e32.htm">Scene</a>
                    itself is agnostic about
                    <a href="3245d6a2-5855-981a-7118-5eef2136de75.htm">LodGroupNode</a>s
                    – it does not distinguish between different types of scene and therefore does
                    not automatically evaluate LOD. The
                    <a href="3245d6a2-5855-981a-7118-5eef2136de75.htm">LodGroupNode</a>s
                    need to be handled in the scene queries (interface
                    ISceneQuery).
                    The important steps that need to be performed in the scene query are:
                </p><ol><li><p><strong>Distance calculation:</strong>
                            The first step is to compute the view-normalized distance of a scene node.
                        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAACCBCAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAACCBCAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAACCBCAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAACCBCAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Calculate view-normalized distance of scene node.</span>
<span class="highlight-keyword">float</span> distance = GraphicsHelper.GetViewNormalizedDistance(node, cameraNode);

<span class="highlight-comment">// Apply LOD bias. (The LOD bias is a factor that can be used to increase</span>
<span class="highlight-comment">// or decrease the viewing distance.)</span>
distance *= cameraNode.LodBias * context.LodBias;</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAACCBCAAA");</script></li><li><p><strong>Distance culling (MaxDistance):</strong>
                            The distance can then be used for distance culling.
                        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAABCBCAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAABCBCAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAABCBCAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAABCBCAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Distance Culling: Check whether scene node is within MaxDistance.</span>
<span class="highlight-keyword">if</span> (Numeric.IsPositiveFinite(node.MaxDistance) &amp;&amp; distance &gt;= node.MaxDistance)
  ... ignore scene node ...</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAABCBCAAA");</script></li><li><p><strong>LOD selection:</strong></p><p>
                            Then, if the current node is a
                            <a href="3245d6a2-5855-981a-7118-5eef2136de75.htm">LodGroupNode</a>,
                            the current LOD can be selected.
                        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAACBCAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAACBCAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAAACBCAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAACBCAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">var</span> lodGroupNode = node <span class="highlight-keyword">as</span> LodGroupNode;
<span class="highlight-keyword">if</span> (lodGroupNode != <span class="highlight-keyword">null</span>)
{
  <span class="highlight-comment">// Evaluate LOD group.</span>
  <span class="highlight-keyword">var</span> lodSelection = lodGroupNode.SelectLod(context, distance);
  ... add lodSelection.Current to scene nodes ...
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAACBCAAA");</script></li></ol><p>
                    See
                    <a href="8928eaec-020b-00ed-4ad7-12f83aa1338a.htm">ISceneQuery</a>
                    for full example code of scene query that supports LOD.
                </p><p>
                    LOD and LOD blending are explained in detail in the
                    <em>LodBlendingSample</em> (see
                    <a href="dde51686-4f07-4c54-95d4-756ec929cb57.htm">Samples</a>).
                </p><h4 class="subHeading" id="Blending">LOD blending</h4><div class="subsection"><p><span class="term">LOD blending</span> can be used to create smooth transitions between LODs.
                            Instant LOD switches can result in apparent "popping" of the geometry in the scene. The
                            property <a href="9e014ac4-75db-71de-82b0-e50b8c6d1d1e.htm">RenderContext<span id="LSTBC82096E_7"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBC82096E_7?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>LodBlendingEnabled</a>
                            can be set to enable smooth transitions: The renderer draws both LODs and blends them
                            using screen-door transparency (stipple patterns). The length of the transition phase is
                            determined by the <a href="cdab8ef9-bcf8-2a77-9d06-b11eb48ce45f.htm">LodHysteresis</a>.
                        </p><p>
                            Here is a video comparing instant switches and LOD blending:
                        </p><ul class="noBullet"><li><p><a href="https://www.youtube.com/watch?v=UlXb9Si2GNI" target="_blank">Video: LOD Blending</a></p></li></ul><p>
                            Only models that support screen-door transparency can be blended at runtime.
                            See <a href="fa431d48-b457-4c70-a590-d44b0840ab1e.htm">Screen-Door Transparency</a> for more
                            information.
                        </p><p>
                            If LOD blending should be used, it must be implemented in the scene query
                            where LOD is handled. It involves following steps:
                        </p><p>
                            If the scene node is close to the max draw distance, we can fade out the model.
                        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAGAAACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAGAAACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAGAAACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAGAAACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Fade out scene node near MaxDistance to avoid popping.</span>
<span class="highlight-keyword">if</span> (context.LodBlendingEnabled &amp;&amp; node.SupportsInstanceAlpha())
{
  <span class="highlight-keyword">float</span> d = node.MaxDistance - distance;
  <span class="highlight-keyword">float</span> alpha = (d &lt; context.LodHysteresis) ? d / context.LodHysteresis : <span class="highlight-number">1</span>;
  node.SetInstanceAlpha(alpha);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAGAAACAAA");</script><p><a href="995e31ca-1175-7c00-6213-a3ab1d60b370.htm">SupportsInstanceAlpha</a>
                            and
                            <a href="90491971-d246-41ca-5ab9-4b449ccab395.htm">SetInstanceAlpha</a>
                            are two helper methods for setting the effect parameter for screen-door transparency.
                        </p><p>
                            After the LOD selection, we can use the information of the
                            <a href="2dc8717a-2d1b-7888-0116-a55b2ae44557.htm">LodSelection</a>
                            to find out the current LOD and whether the model is
                            currently transitioning between levels. Based on this information we can
                            blend between LODs.
                        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EADAAACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EADAAACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EADAAACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EADAAACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// ----- Evaluate LOD group.</span>
<span class="highlight-keyword">var</span> lodSelection = lodGroupNode.SelectLod(context, distance);
<span class="highlight-keyword">if</span> (lodSelection.Next != <span class="highlight-keyword">null</span>
    &amp;&amp; context.LodBlendingEnabled
    &amp;&amp; lodSelection.Current.SupportsInstanceAlpha()
    &amp;&amp; lodSelection.Next.SupportsInstanceAlpha())
{
  <span class="highlight-comment">// The LOD model is currently transitioning between two LODs.</span>
  ... add lodSelection.Current to query results ...
  lodSelection.Current.SetInstanceAlpha(-(<span class="highlight-number">1</span> - lodSelection.Transition));

  ... add lodSelection.Next to query results ...
  lodSelection.Next.SetInstanceAlpha(lodSelection.Transition);
}
<span class="highlight-keyword">else</span>
{
  <span class="highlight-comment">// No blending between two LODs. Just show current LOD.</span>
  <span class="highlight-keyword">if</span> (lodSelection.Current.SupportsInstanceAlpha())
    lodSelection.Current.SetInstanceAlpha(<span class="highlight-number">1</span>);

  ... add lodSelection.Current to query results ...
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EADAAACAAA");</script><p>
                            Note that the current LOD is drawn with a negative alpha and the next LOD is
                            drawn with a positive alpha. The pixel shader checks the sign and automatically
                            inverts one of the stipple patterns.
                        </p><p>
                            LOD and LOD blending are explained in detail in the
                            <em>LodBlendingSample</em> (see
                            <a href="dde51686-4f07-4c54-95d4-756ec929cb57.htm">Samples</a>).
                        </p><div class="alert"><table><tr><th><img src="../icons/AlertNote.png" alt="Note" /> Note</th></tr><tr><td><p>
                                LOD blending can be expensive: The workload increases during transitions. Two
                                models need to be rendered instead of one. Therefore, LOD blending should be
                                disable during graphically intensive scenes. Chances are that LOD popping is not
                                noticed anyway. The LOD transition phase should be kept short. (The length of the
                                LOD transition is determined by the property
                                <a href="cdab8ef9-bcf8-2a77-9d06-b11eb48ce45f.htm">RenderContext<span id="LSTBC82096E_8"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBC82096E_8?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>LodHysteresis</a>).
                            </p></td></tr></table></div></div></div><div class="collapsibleAreaRegion" id="FurtherReading"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Further Reading</span></div><div id="ID3RBSection" class="collapsibleSection"><ul class="noBullet"><li><p><a href="http://www.digitalrune.com/Blog/Post/1737/Level-Of-Detail" target="_blank">Level Of Detail (DigitalRune Blog)</a></p></li><li><p><a href="http://www.digitalrune.com/Blog/Post/1738/Level-of-Detail-Useful-Equations" target="_blank">Level of Detail: Useful Equations (DigitalRune Blog)</a></p></li><li><p><a href="http://www.digitalrune.com/Blog/Post/1739/LOD-Metrics" target="_blank">LOD Metrics (DigitalRune Blog)</a></p></li></ul></div></div></div><div id="pageFooter" class="pageFooter">Copyright (c) 2006-2016 DigitalRune GmbH. All rights reserved. (Last updated: 2016-03-10)<p><a href="http://www.digitalrune.com/" target="_blank">http://www.digitalrune.com/</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40digitalrune.com?Subject=DigitalRune Documentation">office@digitalrune.com</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>