<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Multithreading</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="678bfb4e-070d-4322-80d6-3367d6fdec68" /><meta name="Description" content="This section describes how to configure multithreading in DigitalRune Particles." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">DigitalRune Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="38bd0f53-477c-48c5-91cc-b9fb7062ceb3.htm" title="DigitalRune Documentation" tocid="roottoc">DigitalRune Documentation</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="5044112e-c86d-4d85-87d0-b567a0361c21.htm" title="DigitalRune Particles" tocid="5044112e-c86d-4d85-87d0-b567a0361c21">DigitalRune Particles</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="6f2fd7a2-0d47-4a6d-a833-14b1fe62e0a9.htm" title="Design Notes" tocid="6f2fd7a2-0d47-4a6d-a833-14b1fe62e0a9">Design Notes</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="7fffe522-a53c-4944-979f-8646dc41ac9a.htm" title="Particle Systems, Parameters and Effectors" tocid="7fffe522-a53c-4944-979f-8646dc41ac9a">Particle Systems, Parameters and Effectors</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="678bfb4e-070d-4322-80d6-3367d6fdec68.htm" title="Multithreading" tocid="678bfb4e-070d-4322-80d6-3367d6fdec68">Multithreading</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="25e7a7a0-265e-4c12-9e41-be23852b39cf.htm" title="&quot;How To&quot; Articles" tocid="25e7a7a0-265e-4c12-9e41-be23852b39cf">"How To" Articles</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b113ef19-247b-4731-b704-1f4855dccfc0.htm" title="FAQ" tocid="b113ef19-247b-4731-b704-1f4855dccfc0">FAQ</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="ab3315a0-7863-4311-abb5-b0ae31198a06.htm" title="Class Diagrams" tocid="ab3315a0-7863-4311-abb5-b0ae31198a06">Class Diagrams</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="DigitalRune" src="../icons/DigitalRune-Logo.png" /></td><td class="titleColumn">Multithreading</td></tr></table><span class="introStyle"></span><div class="introduction"><p>This section describes how to configure multithreading in DigitalRune Particles.</p></div><div class="collapsibleAreaRegion" id="Multithreading"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Multithreading in DigitalRune Particles</span></div><div id="ID0RBSection" class="collapsibleSection"><p>
          The
          <a href="4f0cff76-3496-ac25-35f8-ac5ebb9a25fd.htm">ParticleSystemManager</a>
          has integrated support for multithreading. Multithreading can be enabled or disabled using the property
          <a href="76069e71-0b91-0d90-1c3e-b2340cd28653.htm">EnableMultithreading</a>.
          In multithreading mode particle systems are updated in parallel on multiple threads.
          The property is enabled by default on systems with multiple CPU cores (most PCs and the Xbox 360).
          You need to disable multithreading if you decide to run all particle systems on a single thread.
        </p><p>
          The
          <a href="2cbfae22-0df1-a6eb-f196-cb13c862a1cd.htm">ParticleSystem</a>
          has integrated support for multithreading too. Multithreading can be enabled or disabled using the property
          <a href="76069e71-0b91-0d90-1c3e-b2340cd28653.htm">EnableMultithreading</a>.
          In multithreading mode child particle systems are automatically updated in parallel on multiple threads.
          The property is <em>disabled</em> by default.
        </p><p>
          The particle effectors of a single particle system are not updated in parallel.
          They are updated in the order in which they were added to a particle system. (Most effects
          require the particle effectors to be updated in a specific sequence.)
        </p><p>
          The multithreading support is provided by the
          <a href="dc44c3a5-8545-4253-9da1-62258a00607c.htm">DigitalRune Base Library</a>. The namespace
          <a href="34755e8a-951a-369c-717a-134c9c1a337e.htm">DigitalRune.Threading</a>
          provides a task-based threading library that works cross-platform. The solution is optimized
          for the .NET Compact Framework to achieve maximum performance on the Xbox 360.
        </p><p>
          The DigitalRune libraries make extensive use of the threading library. You should also take
          advantage of the library if you plan to implement concurrency in your application.
          The threading solution is fully configurable and the included task scheduler can automatically
          balance the workload across all available CPU cores.
          See class
          <a href="80257661-725a-be38-7bf1-7f97e6a3b94e.htm">Parallel</a>
          to find out more.
        </p><div class="alert"><table><tr><th><img src="../icons/AlertCaution.png" alt="Caution note" /> Caution</th></tr><tr><td><p>
            It is not recommended to use multiple threading solutions in one application. Using multiple
            independent solutions can lead to bad load balancing and oversubscription. The additional
            overhead can cause a performance hit.
          </p></td></tr></table></div></div><div class="collapsibleAreaRegion" id="random"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Class Random is not thread-safe!</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
          It is important to know that the .NET class
          <a href="http://msdn.microsoft.com/en-us/library/system.random.aspx" target="_blank">Random</a>,
          which is used by particle systems as the random number generator, is not thread-safe!
          Therefore, each particle system creates its own instance of
          <a href="http://msdn.microsoft.com/en-us/library/system.random.aspx" target="_blank">Random</a> -
          see also <a href="8c6f4ed6-3d35-4c23-9f64-aa823200e78b.htm">Statistics and Distributions in DigitalRune Mathematics</a>.
        </p><p>
          If multithreading is disabled, the same random number generator can be assigned to
          all particle system instances (property
          <a href="90d3608b-a48d-7756-08b4-72b39d2d672c.htm">ParticleSystem<span id="LSTEA8BB141_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTEA8BB141_0?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Random</a>)
          to safe a bit of memory.
        </p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID2RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="76069e71-0b91-0d90-1c3e-b2340cd28653.htm">ParticleSystemManager<span id="LSTEA8BB141_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTEA8BB141_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>EnableMultithreading</a></div><div class="seeAlsoStyle"><a href="2d620ff7-980b-fd31-9109-85c3c0b9bb9f.htm">ParticleSystem<span id="LSTEA8BB141_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTEA8BB141_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>EnableMultithreading</a></div><div class="seeAlsoStyle"><a href="80257661-725a-be38-7bf1-7f97e6a3b94e.htm">DigitalRune.Threading<span id="LSTEA8BB141_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTEA8BB141_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Parallel</a></div><div class="seeAlsoStyle"><a href="34755e8a-951a-369c-717a-134c9c1a337e.htm">DigitalRune.Threading</a></div></div></div></div><div id="pageFooter" class="pageFooter">Copyright (c) 2006-2016 DigitalRune GmbH. All rights reserved. (Last updated: 2016-03-10)<p><a href="http://www.digitalrune.com/" target="_blank">http://www.digitalrune.com/</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40digitalrune.com?Subject=DigitalRune Documentation">office@digitalrune.com</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>