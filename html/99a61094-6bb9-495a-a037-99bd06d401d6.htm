<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Resource Pooling</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="99a61094-6bb9-495a-a037-99bd06d401d6" /><meta name="Description" content="This section describes the kind of resource pooling that is used in DigitalRune Geometry." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">DigitalRune Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="38bd0f53-477c-48c5-91cc-b9fb7062ceb3.htm" title="DigitalRune Documentation" tocid="roottoc">DigitalRune Documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="79a8677d-9460-4118-b27b-cef353dfbd92.htm" title="DigitalRune Physics" tocid="79a8677d-9460-4118-b27b-cef353dfbd92">DigitalRune Physics</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="81a6e7ab-bdd3-43d6-b20c-5322ff3f936a.htm" title="Advanced Topics" tocid="81a6e7ab-bdd3-43d6-b20c-5322ff3f936a">Advanced Topics</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="a8933d84-3eee-430c-a472-4fe0db5c1ecd.htm" title="Collision Response Filter" tocid="a8933d84-3eee-430c-a472-4fe0db5c1ecd">Collision Response Filter</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b52c86be-d31e-4c6f-9892-331af87a0703.htm" title="Continuous Collision Detection" tocid="b52c86be-d31e-4c6f-9892-331af87a0703">Continuous Collision Detection</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="fae52e31-ede2-451e-b107-e42db486d69c.htm" title="Simulation Islands" tocid="fae52e31-ede2-451e-b107-e42db486d69c">Simulation Islands</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="059ddf90-e473-470c-a59c-ee26feff7d12.htm" title="Sleeping" tocid="059ddf90-e473-470c-a59c-ee26feff7d12">Sleeping</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="c4a491c9-bc08-48fa-b85f-7bac2e78e295.htm" title="Timing" tocid="c4a491c9-bc08-48fa-b85f-7bac2e78e295">Timing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="84231d22-23c1-446c-9e17-36ad2a081133.htm" title="Multithreading" tocid="84231d22-23c1-446c-9e17-36ad2a081133">Multithreading</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="99a61094-6bb9-495a-a037-99bd06d401d6.htm" title="Resource Pooling" tocid="99a61094-6bb9-495a-a037-99bd06d401d6">Resource Pooling</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="bf6f855b-d3b3-49c0-a341-a31f922bb4da.htm" title="Units and Scale" tocid="bf6f855b-d3b3-49c0-a341-a31f922bb4da">Units and Scale</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="DigitalRune" src="../icons/DigitalRune-Logo.png" /></td><td class="titleColumn">Resource Pooling</td></tr></table><span class="introStyle"></span><div class="introduction"><p>This section describes the kind of resource pooling that is used in DigitalRune Geometry.</p></div><div class="collapsibleAreaRegion" id="ResourcePooling"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Resource pooling</span></div><div id="ID0RBSection" class="collapsibleSection"><p>
                    The current version of the .NET Compact Framework has some limitations compared to the full version
                    of the .NET Framework. In particular, it does not support generational garbage collection. A run of
                    the garbage collector on the Xbox 360 or on the Windows Phone 7 typically has a higher latency than
                    in Windows and can lead to significant frame rate drops.
                </p><p>
                    Therefore, it is crucial to reduce the amount of memory that is allocated at runtime to avoid too
                    frequent garbage collections. A strategy to reduce memory allocations is
                    <em>resource pooling</em>. When using a resource pool (see class
                    <a href="c66285dd-f24e-3c3f-9beb-0fd1e564475e.htm">ResourcePool<span id="LST835B5FBB_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST835B5FBB_0?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>T<span id="LST835B5FBB_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST835B5FBB_1?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a>) objects
                    are acquired from the pool instead of being newly allocated on the managed heap. When an object is no
                    longer used it is returned to the resource pool for later reuse.
                </p><div class="alert"><table><tr><th><img src="../icons/AlertNote.png" alt="Note" /> Note</th></tr><tr><td><p>
                        You can use the class <a href="c66285dd-f24e-3c3f-9beb-0fd1e564475e.htm">ResourcePool<span id="LST835B5FBB_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST835B5FBB_2?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>T<span id="LST835B5FBB_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST835B5FBB_3?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a>
                        in your own application to minimize memory allocations.
                    </p></td></tr></table></div><h4 class="subHeading" id="Physics">Resource pooling in DigitalRune Physics</h4><div class="subsection"><p>
                            DigitalRune Physics extensively uses resource pools to avoid unnecessary memory allocations. In particular,
                            objects of
                            type <a href="f9c58aa7-5680-78d1-ed07-2449db9b8054.htm">ContactConstraint</a>
                            are now automatically recycled and reused.
                        </p><div class="alert"><table><tr><th><img src="../icons/AlertCaution.png" alt="Caution note" /> Caution</th></tr><tr><td><p>
                                You should not store direct references to objects of type
                                <a href="d03fffa6-8a23-1526-15c3-a5800cbdc56e.htm">ContactSet</a>,
                                <a href="bfe2ad9f-ea88-a6a7-0e57-b9f95c88edb5.htm">Contact</a>
                                or <a href="f9c58aa7-5680-78d1-ed07-2449db9b8054.htm">ContactConstraint</a>
                                that were automatically created by the physics simulation. These objects can be recycled and
                                reused between updates of the collision detection - so the references might become invalid.
                            </p><p>
                                In general it is not necessary to keep references to these types of objects.
                            </p></td></tr></table></div></div><h4 class="subHeading" id="ThreadSafety">Thread-safety</h4><div class="subsection"><p>
                            The class <a href="c66285dd-f24e-3c3f-9beb-0fd1e564475e.htm">ResourcePool<span id="LST835B5FBB_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST835B5FBB_4?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>T<span id="LST835B5FBB_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST835B5FBB_5?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a>
                            provided by the <a href="dc44c3a5-8545-4253-9da1-62258a00607c.htm">DigitalRune Base Library</a> is thread-safe.
                            It is safe to access the same resource pool from multiple threads simultaneously.
                        </p></div><h4 class="subHeading" id="More">More information</h4><div class="subsection"><p>
                            Please read <a href="9e2a4144-69e9-4bf2-8cea-79713eb91490.htm">Resource Pooling (DigialRune Base library)</a>
                            for detailed information about resource pools.
                        </p></div></div></div></div><div id="pageFooter" class="pageFooter">Copyright (c) 2006-2016 DigitalRune GmbH. All rights reserved. (Last updated: 2016-03-10)<p><a href="http://www.digitalrune.com/" target="_blank">http://www.digitalrune.com/</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40digitalrune.com?Subject=DigitalRune Documentation">office@digitalrune.com</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>