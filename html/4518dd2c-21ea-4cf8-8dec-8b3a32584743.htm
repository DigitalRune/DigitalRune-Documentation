<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Billboards and Particles</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="4518dd2c-21ea-4cf8-8dec-8b3a32584743" /><meta name="Description" content="A billboard is a textured polygon (usually a quad) used for drawing impostors, particles and other effects. The difference to a regular polygon is that the billboard can be automatically oriented during rendering." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">DigitalRune Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="38bd0f53-477c-48c5-91cc-b9fb7062ceb3.htm" title="DigitalRune Documentation" tocid="roottoc">DigitalRune Documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="0a8eb9ca-74ae-4746-9289-93d909b07e22.htm" title="DigitalRune Graphics" tocid="0a8eb9ca-74ae-4746-9289-93d909b07e22">DigitalRune Graphics</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="7d5a0abe-8231-452c-895c-e6dbab83822b.htm" title="Graphics Programming" tocid="7d5a0abe-8231-452c-895c-e6dbab83822b">Graphics Programming</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="fda6c965-0105-4a5e-a0db-f8fa6ec4e73f.htm" title="Graphics Service" tocid="fda6c965-0105-4a5e-a0db-f8fa6ec4e73f">Graphics Service</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="2e870374-8980-4fbc-9426-1d1a6e2d9766.htm" title="Graphics Screens" tocid="2e870374-8980-4fbc-9426-1d1a6e2d9766">Graphics Screens</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="4d8c922f-60cb-4b92-a22c-03c9e8816712.htm" title="Scene Management" tocid="4d8c922f-60cb-4b92-a22c-03c9e8816712">Scene Management</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="6b3a13bc-37b4-4820-9f82-c2364a9ed2eb.htm" title="Rendering" tocid="6b3a13bc-37b4-4820-9f82-c2364a9ed2eb">Rendering</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="ba1be841-af9c-41a4-8348-0b6bd92efdd9.htm" title="Effects and Effect Bindings" tocid="ba1be841-af9c-41a4-8348-0b6bd92efdd9">Effects and Effect Bindings</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="34a7f065-df4f-4f40-8b5c-5f0afee365db.htm" title="Materials and Material Instances" tocid="34a7f065-df4f-4f40-8b5c-5f0afee365db">Materials and Material Instances</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="cb08d0d8-8ea6-49fc-b318-b185dbb70608.htm" title="Models and Meshes" tocid="cb08d0d8-8ea6-49fc-b318-b185dbb70608">Models and Meshes</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="fda1f969-9b64-4851-873c-a59466ac69ba.htm" title="Cameras" tocid="fda1f969-9b64-4851-873c-a59466ac69ba">Cameras</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="e316a87e-0cdb-4c6b-bcb0-a2e66004c26f.htm" title="Lights" tocid="e316a87e-0cdb-4c6b-bcb0-a2e66004c26f">Lights</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="3f82c46b-efec-4416-807f-670ac1930117.htm" title="Shadows" tocid="3f82c46b-efec-4416-807f-670ac1930117">Shadows</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="630fb69e-a032-4125-bdc0-5484fbe2c86d.htm" title="Lens Flares" tocid="630fb69e-a032-4125-bdc0-5484fbe2c86d">Lens Flares</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="f782dc86-40e9-45c1-869a-4baf86e28ed9.htm" title="Decals" tocid="f782dc86-40e9-45c1-869a-4baf86e28ed9">Decals</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="4518dd2c-21ea-4cf8-8dec-8b3a32584743.htm" title="Billboards and Particles" tocid="4518dd2c-21ea-4cf8-8dec-8b3a32584743">Billboards and Particles</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="d4d56ebf-a623-492c-bd37-b41a2979323e.htm" title="Sprites (Images and Text)" tocid="d4d56ebf-a623-492c-bd37-b41a2979323e">Sprites (Images and Text)</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="d70873e7-1dbc-492b-b10d-1afb6f06687a.htm" title="Figures (Lines, 2D Shapes)" tocid="d70873e7-1dbc-492b-b10d-1afb6f06687a">Figures (Lines, 2D Shapes)</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="0bc6a222-64d5-4642-a2b6-241e9017c873.htm" title="Fog" tocid="0bc6a222-64d5-4642-a2b6-241e9017c873">Fog</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="975dcbca-5c87-4f33-a372-0cfe7f50cebe.htm" title="Sky" tocid="975dcbca-5c87-4f33-a372-0cfe7f50cebe">Sky</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="46f261f5-750c-4df5-99e2-b6a289f15098.htm" title="Terrain" tocid="46f261f5-750c-4df5-99e2-b6a289f15098">Terrain</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="5697f90f-2893-4ed5-ae66-da63afccdfc3.htm" title="Water" tocid="5697f90f-2893-4ed5-ae66-da63afccdfc3">Water</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="924e5123-9ed9-4db7-bd0c-2ec8589985ed.htm" title="Post-Processing" tocid="924e5123-9ed9-4db7-bd0c-2ec8589985ed">Post-Processing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b7e96cd7-c737-4805-b5a9-98f1e8acd1d5.htm" title="Anti-Aliasing" tocid="b7e96cd7-c737-4805-b5a9-98f1e8acd1d5">Anti-Aliasing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="b320aebd-46a0-45d8-8edb-0c717152a56b.htm" title="Level of Detail (LOD)" tocid="b320aebd-46a0-45d8-8edb-0c717152a56b">Level of Detail (LOD)</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="cc20d61e-83cb-46c7-a2e2-0841a35043ba.htm" title="Occlusion Culling" tocid="cc20d61e-83cb-46c7-a2e2-0841a35043ba">Occlusion Culling</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="7fbfaba5-af8d-4bf7-b5c3-6c084e1bfc54.htm" title="Windows Forms, WPF, UWP Interoperability" tocid="7fbfaba5-af8d-4bf7-b5c3-6c084e1bfc54">Windows Forms, WPF, UWP Interoperability</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="4e6f5dc1-8897-466f-88f2-b5c56d43a3c5.htm" title="Miscellaneous" tocid="4e6f5dc1-8897-466f-88f2-b5c56d43a3c5">Miscellaneous</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="DigitalRune" src="../icons/DigitalRune-Logo.png" /></td><td class="titleColumn">Billboards and Particles</td></tr></table><span class="introStyle"></span><div class="introduction"><p>This topic contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#Billboard">Billboards (images and text)</a></li><li class="outlineSectionEntry"><a href="#Particles">Particles</a></li><li class="outlineSectionEntry"><a href="#Rendering">Rendering billboards and particles</a></li><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#Renderer">BillboardRenderer</a></li><li class="outlineSectionEntry"><a href="#SoftParticles">Soft particles</a></li><li class="outlineSectionEntry"><a href="#OffScreen">High-speed, off-screen particles</a></li></ul></ul></div><div class="collapsibleAreaRegion" id="Billboard"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Billboards (images and text)</span></div><div id="ID0RBSection" class="collapsibleSection"><p>
                    A <span class="term">billboard</span> is a textured polygon (usually a quad) used for drawing
                    impostors, particles and other effects. The difference to a regular polygon is that the
                    billboard can be automatically oriented during rendering. For example: A view plane-aligned
                    billboard is always rendered parallel to the screen, the quad always faces the camera.
                </p><p>
                    There are two types of billboards:
                    <a href="bdb47e68-70bb-8170-3c3c-c1f46f18a1cb.htm">ImageBillboard</a>s
                    and <a href="2730451c-e1f5-b142-e14a-0c363a74c83d.htm">TextBillboard</a>s.
                </p><p>
                    Billboards are positioned using a <a href="73900bd2-e82a-5119-cf0a-871340cf9d24.htm">BillboardNode</a>.
                    The <a href="4e6407d7-3a78-1770-ae4d-2aa46d1dbefa.htm">BillboardOrientation</a>
                    defines how the billboard is rendered. This type provides definitions for the most common
                    orientations.
                </p><div class="mediaNear"><img alt="DigitalRune.Graphics (Billboards)" src="../media/Graphics_Billboards.png" /><div class="caption">Class Diagram: Billboards</div></div></div><div class="collapsibleAreaRegion" id="Particles"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Particles</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
                    Particle systems can be used to simulate complex effects, such as explosion, fire, or smoke.
                    <a href="2cbfae22-0df1-a6eb-f196-cb13c862a1cd.htm">ParticleSystem</a>s
                    are part of the <a href="5044112e-c86d-4d85-87d0-b567a0361c21.htm">DigitalRune Particles</a> library. A
                    <a href="cc97eb93-8e8a-820b-81ca-c1e6e4880a79.htm">ParticleSystemNode</a>
                    creates an instance of a particle system within a scene.
                </p><p>
                    The particle system manager and the graphics manager can be run in parallel (multithreading).
                    This complicates the use of particle effects: The game logic needs to explicitly synchronize
                    the particle data and the render data by calling
                    <a href="3807030f-b11f-fcc7-5c6c-c71e50f72153.htm">ParticleSystemNode<span id="LSTCB097A3D_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTCB097A3D_0?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Synchronize</a>
                    explicitly in each frame! See <a href="cc97eb93-8e8a-820b-81ca-c1e6e4880a79.htm">ParticleSystemNode</a>
                    for more information.
                </p><div class="mediaNear"><img alt="DigitalRune.Graphics (Particles)" src="../media/Graphics_Particles.png" /><div class="caption">Class Diagram: Particles</div></div></div><div class="collapsibleAreaRegion" id="Rendering"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Rendering billboards and particles</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
                    This section explains how to render billboards and particle effects using the
                    <a href="b16622e6-b040-0c77-9b2d-272c3ac34014.htm">BillboardRenderer</a>.
                </p><h4 class="subHeading" id="Renderer">BillboardRenderer</h4><div class="subsection"><p>
                            The <a href="b16622e6-b040-0c77-9b2d-272c3ac34014.htm">BillboardRenderer</a>
                            is a <a href="c022a3a4-2330-9b46-24ad-c8f3ae13f1f8.htm">SceneNodeRenderer</a>
                            that handles <a href="73900bd2-e82a-5119-cf0a-871340cf9d24.htm">BillboardNode</a>s
                            and <a href="cc97eb93-8e8a-820b-81ca-c1e6e4880a79.htm">ParticleSystemNode</a>s.
                        </p><p>
                            Billboards and particles may be rendered with or without depth test. The required depth-stencil
                            state needs to be set before the renderer is called.
                        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID2EADACABAAA_tab1" class="codeSnippetContainerTabSingle">Example (C#)</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID2EADACABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID2EADACABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID2EADACABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Render opaque objects here...</span>

<span class="highlight-comment">// Set required depth-stencil state.</span>
graphicsDevice.DepthStencilState = DepthStencilState.DepthRead;

<span class="highlight-comment">// Render a list of billboard and particle nodes.</span>
billboardRenderer.Render(sceneNodes, context, RenderOrder.BackToFront);</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID2EADACABAAA");</script><p>
                            The renderer automatically batches billboards and particles that use the same texture and
                            renders them with a single draw call. The property
                            <a href="a6a0a7cb-e7a0-d8b4-65cc-0ed283de4ef9.htm">BufferSize</a>
                            limits the number of billboards/particles that can be drawn with a single draw call.
                        </p><div class="alert"><table><tr><th><img src="../icons/AlertNote.png" alt="Tip" /> Tip</th></tr><tr><td><p>
                                The <a href="b16622e6-b040-0c77-9b2d-272c3ac34014.htm">BillboardRenderer</a>
                                batches billboards and particles based on their texture. It is therefore recommended to
                                minimize the number of texture, for example by packing all billboard and particle images
                                into a single texture (see <a href="4e6f5dc1-8897-466f-88f2-b5c56d43a3c5.htm#TextureAtlas">Texture Atlases</a>).
                            </p></td></tr></table></div><p>
                            The <a href="b16622e6-b040-0c77-9b2d-272c3ac34014.htm">BillboardRenderer</a>
                            can also render particles as ribbons (a.k.a. "beams", "lines", "trails"). See
                            <a href="cc97eb93-8e8a-820b-81ca-c1e6e4880a79.htm">ParticleSystemNode</a>
                            for more information.
                        </p></div><h4 class="subHeading" id="SoftParticles">Soft particles</h4><div class="subsection"><p>
                            Billboards and particles are usually rendered as flat quads, which cause hard edges when they
                            intersect with other geometry in the scene. "Soft particles" are rendered by performing a
                            depth check in the pixel shader. Soft particles create
                            smooth transitions when they intersect with other geometry.
                        </p><div class="mediaNear"><img alt="Soft-Particles" src="../media/Soft-Particles.jpg" /></div><p>
                            Soft particles also fade out near the camera. That means, if the camera moves through
                            a particle, the particle fades out smoothly (which reduces "popping" artifacts).
                        </p><p>
                            To enable rendering of soft particles set the property
                            <a href="ebbaa967-8767-7bcc-108d-68be9421e6df.htm">EnableSoftParticles</a>
                            to <span class="code">true</span>. In addition, the depth buffer needs to be set in the render
                            context (property <a href="60b28c3f-8979-b94f-e6fa-1f5c9043f767.htm">GBuffer0</a>).
                        </p><p>
                            For image billboards: The property <a href="862e97df-bc4c-de94-2ddd-579a04dfb96e.htm">ImageBillboard<span id="LSTCB097A3D_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTCB097A3D_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Softness</a>
                            defines whether billboards are rendered "hard" or "soft".
                        </p><p>
                            For particle systems: The <a href="23198c10-c322-8997-2609-8698fd03efa1.htm">Softness</a>
                            parameter (a uniform particle parameter of type <a href="http://msdn2.microsoft.com/en-us/library/3www918f" target="_blank">Single</a>)
                            defines whether particles are rendered "hard" or "soft".
                        </p><p>
                            The default softness is 0, which means that the billboard/particle shows hard edges.
                            The value can be set to NaN (= automatic) or a fixed softness value. (The softness is
                            basically the thickness of the particle in world space.)
                        </p></div><h4 class="subHeading" id="OffScreen">High-speed, off-screen particles</h4><div class="subsection"><p>
                            Off-screen rendering is only available in HiDef profile. It can
                            be turned on or off using BillboardRenderer.EnableOffscreenRendering.
                        </p><p>
                            Large amounts of particles covering the screen can cause a lot of overdraw. This can reduce
                            the frame rate, if the game is limited by the GPU's fill rate. One solution to this problem
                            is to render particles into a low-resolution off-screen buffer. After all particles
                            are rendered, the low-resolution buffer is upsampled and combined with the scene
                            render target. This reduces the amount of overdraw, at the expense of additional
                            image processing overhead and image quality.
                        </p><p>
                            To enable off-screen rendering set the property <a href="dd3fd926-d9f7-2d3e-b620-4b5032bd5c55.htm">EnableOffscreenRendering</a>
                            to <span class="code">true</span>. In addition a low-resolution copy of the depth buffer
                            (half width and height) needs to be stored in
                            <span class="code">renderContext.Data[RenderContextKey.DepthBufferHalf]</span>.
                        </p><div class="alert"><table><tr><th><img src="../icons/AlertCaution.png" alt="Caution note" /> Caution</th></tr><tr><td><p>
                                When off-screen rendering is enabled the
                                <a href="b16622e6-b040-0c77-9b2d-272c3ac34014.htm">BillboardRenderer</a>
                                automatically switches render targets and invalidates the current depth-stencil buffer!
                            </p><p>
                                HDR rendering combined with off-screen rendering on the Xbox 360
                                is currently limited. It works for additively blended particles, but may cause
                                artifacts when using alpha-blended particles. This is caused by the HdrBlendable
                                format, which only has 2 bits for the alpha channel on the Xbox 360.
                            </p></td></tr></table></div></div></div></div></div><div id="pageFooter" class="pageFooter">Copyright (c) 2006-2016 DigitalRune GmbH. All rights reserved. (Last updated: 2016-03-10)<p><a href="http://www.digitalrune.com/" target="_blank">http://www.digitalrune.com/</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40digitalrune.com?Subject=DigitalRune Documentation">office@digitalrune.com</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>