<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Shadow Types</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="8666619e-60d7-436e-8a0f-b3d982f0dca7" /><meta name="Description" content="All lights (except ambient lights) can cast shadows. Shadow computations are expensive, therefore shadows are disabled by default. Shadows can be enabled per light node by assigning a T:DigitalRune.Graphics.Shadow type to the P:DigitalRune.Graphics." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">DigitalRune Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="38bd0f53-477c-48c5-91cc-b9fb7062ceb3.htm" title="DigitalRune Documentation" tocid="roottoc">DigitalRune Documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="0a8eb9ca-74ae-4746-9289-93d909b07e22.htm" title="DigitalRune Graphics" tocid="0a8eb9ca-74ae-4746-9289-93d909b07e22">DigitalRune Graphics</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="7d5a0abe-8231-452c-895c-e6dbab83822b.htm" title="Graphics Programming" tocid="7d5a0abe-8231-452c-895c-e6dbab83822b">Graphics Programming</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="3f82c46b-efec-4416-807f-670ac1930117.htm" title="Shadows" tocid="3f82c46b-efec-4416-807f-670ac1930117">Shadows</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="8666619e-60d7-436e-8a0f-b3d982f0dca7.htm" title="Shadow Types" tocid="8666619e-60d7-436e-8a0f-b3d982f0dca7">Shadow Types</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="bed07eb7-0d10-40f3-93e8-c823a787b6a7.htm" title="Shadow Filtering" tocid="bed07eb7-0d10-40f3-93e8-c823a787b6a7">Shadow Filtering</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="3f4d959e-9c98-4a97-8d85-7a73c26145d7.htm" title="Shadow Acne" tocid="3f4d959e-9c98-4a97-8d85-7a73c26145d7">Shadow Acne</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="4f8d2843-e46a-44cf-ba8d-c58fb8d9302d.htm" title="Shadow Maps" tocid="4f8d2843-e46a-44cf-ba8d-c58fb8d9302d">Shadow Maps</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="a3f49f80-226e-4a6b-b13a-dbf673b41438.htm" title="Shadow Masks" tocid="a3f49f80-226e-4a6b-b13a-dbf673b41438">Shadow Masks</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="DigitalRune" src="../icons/DigitalRune-Logo.png" /></td><td class="titleColumn">Shadow Types</td></tr></table><span class="introStyle"></span><div class="introduction"><p>This topic contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#Definition">Defining shadows</a></li><li class="outlineSectionEntry"><a href="#StandardShadow">StandardShadow</a></li><li class="outlineSectionEntry"><a href="#CubeMapShadow">CubeMapShadow</a></li><li class="outlineSectionEntry"><a href="#CascadedShadow">CascadedShadow</a></li><li class="outlineSectionEntry"><a href="#CompositeShadow">CompositeShadow</a></li><li class="outlineSectionEntry"><a href="#Custom">Custom shadow map types</a></li></ul></div><div class="collapsibleAreaRegion" id="Definition"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Defining shadows</span></div><div id="ID0RBSection" class="collapsibleSection"><p>
                    All lights (except ambient lights) can cast shadows. Shadow computations are
                    expensive, therefore shadows are disabled by default. Shadows can be
                    enabled per light node by assigning a
                    <a href="2571af11-e755-707d-db01-1cd25fcd5ebd.htm">Shadow</a>
                    type to the
                    <a href="2cd96380-4d74-a2ee-ccd8-fda86b602781.htm">LightNode<span id="LST6E18E240_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST6E18E240_0?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Shadow</a>
                    property.
                </p><div class="mediaNear"><img alt="DigitalRune.Graphics (Shadows)" src="../media/Graphics_Shadows.png" /><div class="caption">Class Diagram: Shadows</div></div><p>
                    DigitalRune Graphics supports the following shadow types.
                </p></div><div class="collapsibleAreaRegion" id="StandardShadow"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />StandardShadow</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
                    The
                    <a href="8304ef95-b8af-395c-e56a-035d0d281f97.htm">StandardShadow</a>
                    uses a regular shadow map. This type of shadow can be assigned to
                    <a href="f4cdcdae-3b5a-5864-6d70-4136438ba9df.htm">Spotlight</a>
                    nodes and
                    <a href="c60da492-e36b-042e-aef7-4a330f771208.htm">ProjectorLight</a>
                    nodes.
                </p></div><div class="collapsibleAreaRegion" id="CubeMapShadow"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />CubeMapShadow</span></div><div id="ID2RBSection" class="collapsibleSection"><p><a href="1ead4eb1-24a9-1697-c981-9b95b1eb9d99.htm">CubeMapShadow</a>
                    uses a cube map to create an omnidirectional shadow. This type of
                    shadow can be assigned to
                    <a href="3bb0bcb6-7374-6ace-5c2e-e8b7effbf75a.htm">PointLight</a>
                    nodes.
                </p></div><div class="collapsibleAreaRegion" id="CascadedShadow"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />CascadedShadow</span></div><div id="ID3RBSection" class="collapsibleSection"><p><a href="0c57c848-9e69-7c24-6357-9798a7a94cbc.htm">CascadedShadow</a>
                    describes a Cascaded Shadow Map (CSM), also known as Parallel Split
                    Shadow Map (PSSM). Up to 4 shadow maps are used to create a shadow
                    that can cover large distances. This type of shadow can be assigned to
                    <a href="ddbd29fe-2db7-9569-2892-7433e7d1e8c6.htm">DirectionalLight</a>
                    nodes – usually the light node representing the sun.
                </p><div class="alert"><table><tr><th><img src="../icons/AlertNote.png" alt="Note" /> Note</th></tr><tr><td><p>
                        Terminology: The word "cascade" actually means "a series of stages".
                        However, it is common to use the term "cascade" to describe an individual
                        "slice" of the CSM instead of the whole series of slices. A
                        "slice" is also called "cascade interval" or "sub-frustum".
                    </p><p>
                        The term "split" can refer to the border between two slices
                        (4 slices = 3 splits) or to the slices. Therefore, the term
                        "split" has to be used with care.
                    </p></td></tr></table></div><p>
                    The property
                    <a href="121b2b58-2583-0476-294b-a99ea91b2c40.htm">Distances</a>
                    defines the split distances in world units. This enables full control
                    over the split distribution. Split distances can also be computed
                    automatically as a mix of linear and logarithmic splitting using
                    <a href="cb770bd0-57e0-472e-77ac-7a9781167485.htm">ComputeSplitDistances</a>.
                </p><p>
                    Shadow maps usually don't cover the whole visible area, which means
                    the max shadow distance is less than the camera far distance. Shadows
                    fade out near the max shadow range. This can be controlled using
                    <a href="1bec222c-b53b-0aa8-526a-26a4a2fe7107.htm">FadeOutRange</a>.
                </p><p><a href="fae03673-7138-1d55-0a73-ddea8a7b7b0d.htm">ShadowFog</a>
                    defines the amount of shadow for all parts of the scene which are
                    outside the max shadow range. In most games, the scene beyond the max
                    shadow range receives full directional light (= no shadows). However,
                    in some scenes, e.g. if the player is inside a dark wood, you might
                    want to treat all parts outside the shadow range as partially shadowed
                    to create a darker scene.
                </p><p>
                    To compute each shadow map an orthographic projection is fitted to the
                    partial camera frustum of the cascade. The near plane of this
                    orthographic projection should be moved as close as possible
                    to the cascade – but not too close in order to catch any shadow casters
                    in front of the cascade.
                    <a href="e533101a-6fd4-b204-580a-fd46a8ab0dc8.htm">MinLightDistance</a>
                    defines the minimum allowed distance of the shadow projection near
                    plane from the cascade. For example, if
                    <a href="e533101a-6fd4-b204-580a-fd46a8ab0dc8.htm">MinLightDistance</a>
                    is 100, then all birds and mountains will throw shadows if they are
                    either inside the camera frustum or outside the camera frustum but
                    within 100 units. Birds and mountains farther than 100 units might
                    not throw shadows.
                </p><p><a href="3f3ceadd-5bf4-bef2-f1cf-b004aa416922.htm">CascadeSelection</a>
                    defines which shadow maps are selected when the shader reads
                    the shadow maps.
                    <a href="1de8f571-fbd7-8d9a-2278-8c83d86ec050.htm">Fast</a>
                    selects the cascades based on the z distance. This is fast but does
                    not make the best use of the computed shadow maps.
                </p><div class="mediaNear"><img alt="Shadow-Cascade-Selection-Fast" src="../media/Shadow-Cascade-Selection-Fast.jpg" /></div><p>
                    The cascade transitions appear on horizontal lines in front of the
                    camera. The transition is close to the camera.
                </p><p><a href="1de8f571-fbd7-8d9a-2278-8c83d86ec050.htm">Best</a>
                    is slower but makes optimal use of the rendered shadow maps. It
                    checks the shadow map coordinates of each pixel to pick the best shadow map.
                </p><div class="mediaNear"><img alt="Shadow-Cascade-Selection-Best" src="../media/Shadow-Cascade-Selection-Best.jpg" /></div><p>
                    The resolution near the camera has increased. Cascade transition
                    are still visible along straight lines but the lines are not
                    horizontal in front of the camera.
                </p><p><a href="1de8f571-fbd7-8d9a-2278-8c83d86ec050.htm">BestDithered</a>
                    uses a dither pattern to hide cascade transitions: In a small
                    interval near the cascade transition, shadowed pixels randomly
                    sample the best or the next-best cascade.
                </p><div class="mediaNear"><img alt="Shadow-Cascade-Selection-Best-Dithered" src="../media/Shadow-Cascade-Selection-Best-Dithered.jpg" /></div><p>
                    To hide the cascade transition even more, you could interpolate
                    both shadow maps. This requires to sample both shadow maps for
                    each pixel – whereas the dither method has to sample only one
                    shadow map.
                </p></div><div class="collapsibleAreaRegion" id="CompositeShadow"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />CompositeShadow</span></div><div id="ID4RBSection" class="collapsibleSection"><p>
                    The
                    <a href="582377bf-1bcc-fea1-d054-f2361884e4ea.htm">CompositeShadow</a>
                    can be used to combine multiple shadows maps for one light source.
                    For example, you can combine several shadow for the sun light to
                    improve visual quality or performance:
                </p><ul><li>
                            A
                            <a href="0c57c848-9e69-7c24-6357-9798a7a94cbc.htm">CascadedShadow</a>
                            creates detailed shadows of dynamic objects over a small distance.
                    </li><li>
                            Another
                            <a href="0c57c848-9e69-7c24-6357-9798a7a94cbc.htm">CascadedShadow</a>
                            creates shadows of static objects over a large distance.
                    </li><li>
                            A variance shadow map creates soft shadows of distant hills
                            and skyscrapers.
                    </li></ul></div><div class="collapsibleAreaRegion" id="Custom"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Custom shadow map types</span></div><div id="ID5RBSection" class="collapsibleSection"><p>
                    Developers can add new types of shadow maps, if necessary. The
                    <a href="dde51686-4f07-4c54-95d4-756ec929cb57.htm">Samples</a>
                    demonstrates how to create custom shadow map types, such as
                    <span class="term">Variance Shadow Maps (VSM)</span>.
                </p></div></div></div><div id="pageFooter" class="pageFooter">Copyright (c) 2006-2016 DigitalRune GmbH. All rights reserved. (Last updated: 2016-03-10)<p><a href="http://www.digitalrune.com/" target="_blank">http://www.digitalrune.com/</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40digitalrune.com?Subject=DigitalRune Documentation">office@digitalrune.com</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>