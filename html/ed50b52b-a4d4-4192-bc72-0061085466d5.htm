<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Geometric Objects and Shapes</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="ed50b52b-a4d4-4192-bc72-0061085466d5" /><meta name="Description" content="This section introduces the concept of shapes and geometric objects." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">DigitalRune Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="38bd0f53-477c-48c5-91cc-b9fb7062ceb3.htm" title="DigitalRune Documentation" tocid="roottoc">DigitalRune Documentation</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="335dc86a-c68d-4d7b-8641-81dd80de5e76.htm" title="DigitalRune Geometry" tocid="335dc86a-c68d-4d7b-8641-81dd80de5e76">DigitalRune Geometry</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="1510119e-5c7c-4ebc-851d-684976c1fb29.htm" title="Overview" tocid="1510119e-5c7c-4ebc-851d-684976c1fb29">Overview</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="7945ac67-dffc-4197-9fbf-58a9b68c0ea1.htm" title="Definitions and Conventions" tocid="7945ac67-dffc-4197-9fbf-58a9b68c0ea1">Definitions and Conventions</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="d995ee69-0650-4993-babd-1cdb1fd8fd7a.htm" title="Pose (Position and Orientation)" tocid="d995ee69-0650-4993-babd-1cdb1fd8fd7a">Pose (Position and Orientation)</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="ed50b52b-a4d4-4192-bc72-0061085466d5.htm" title="Geometric Objects and Shapes" tocid="ed50b52b-a4d4-4192-bc72-0061085466d5">Geometric Objects and Shapes</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="629ec6f3-8533-4ef9-94d0-220ef375387c.htm" title="Collision Detection" tocid="629ec6f3-8533-4ef9-94d0-220ef375387c">Collision Detection</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="9df3b4b6-1218-43b8-be9e-319d97a5b9a0.htm" title="Multithreading" tocid="9df3b4b6-1218-43b8-be9e-319d97a5b9a0">Multithreading</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="4a3324b2-fc11-41bf-bb16-1e8ab644f1c4.htm" title="Resource Pooling" tocid="4a3324b2-fc11-41bf-bb16-1e8ab644f1c4">Resource Pooling</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="7af0a749-83f9-437b-88fc-56f70c0c6dd2.htm" title="XNA Framework Support" tocid="7af0a749-83f9-437b-88fc-56f70c0c6dd2">XNA Framework Support</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="76e11a96-42a4-495c-b8f8-6164a67d05d5.htm" title="Articles" tocid="76e11a96-42a4-495c-b8f8-6164a67d05d5">Articles</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="e32cab3b-cc7c-42ee-8ec9-23dd4467edd0.htm" title="FAQ" tocid="e32cab3b-cc7c-42ee-8ec9-23dd4467edd0">FAQ</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="3cbb67a9-77ff-44cd-be2a-618e0a2d89df.htm" title="Class Diagrams" tocid="3cbb67a9-77ff-44cd-be2a-618e0a2d89df">Class Diagrams</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="DigitalRune" src="../icons/DigitalRune-Logo.png" /></td><td class="titleColumn">Geometric Objects and Shapes</td></tr></table><span class="introStyle"></span><div class="introduction"><p>This section introduces the concept of shapes and geometric objects.</p><p>This topic contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#Geometry">Defining objects with shape and position</a></li><li class="outlineSectionEntry"><a href="#shape">Shape structures vs. shape classes</a></li><li class="outlineSectionEntry"><a href="#Scale">Using scaling</a></li><li class="outlineSectionEntry"><a href="#Memleaks">Memory leaks in geometric objects</a></li><li class="outlineSectionEntry"><a href="#seeAlsoSection">See Also</a></li></ul></div><div class="collapsibleAreaRegion" id="Geometry"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Defining objects with shape and position</span></div><div id="ID0RBSection" class="collapsibleSection"><h4 class="subHeading" id="Shape">Defining a shape</h4><div class="subsection"><p>
                            The class <a href="efff4741-4f03-f106-4b42-5892eb21377e.htm">Shape</a>
                            defines the space that is occupied by an object. Several classes
                            derived from <a href="efff4741-4f03-f106-4b42-5892eb21377e.htm">Shape</a>
                            let you define a range of different shapes. For example:
                            <a href="0d0b67e4-5104-b6ac-e97c-25e9ee2e8054.htm">BoxShape</a>,
                            <a href="a99abb5b-257f-4f39-ccb8-99ed8a87ab96.htm">SphereShape</a>,
                            <a href="f27f2a44-d4e7-73d0-6dc6-53d7a456b99e.htm">PlaneShape</a>,
                            <a href="de0e44ab-f22b-5188-3868-b5031adbd7e1.htm">HeightField</a>,
                            etc. See <a href="61d03276-1512-3364-0b2b-7bdfe52dc6a5.htm">DigitalRune.Geometry.Shapes</a>
                            or <a href="639ca389-0db9-4ab0-86ee-676062d26b9a.htm">Class Diagram of Namespace DigitalRune.Geometry.Shapes</a> for a list of available
                            shapes.
                        </p><p>
                            Shapes are defined in the local coordinate system of the owning object (also known as
                            <span class="term">local space</span>, <span class="term">object space</span> or <span class="term">body space</span>).
                            Most shapes, like spheres, boxes or capsules, do not have a position or orientation.
                            They are centered and axis-aligned at the origin of the local space. This is because
                            these shapes are typically defined only by parameters that describe their
                            dimension ("width", "height", "radius", etc.).
                        </p><p>
                            Some shapes, like points, triangles or rays, are typically defined using position and
                            orientation vectors ("Vertex0", "Origin", "Direction", etc.). Thus, they can be easily
                            positioned in local space.
                        </p></div><h4 class="subHeading" id="Complex">Defining complex shapes</h4><div class="subsection"><p>
                            Several shape classes can be used to build new shapes from simpler shapes, for example:
                            <a href="467bd69b-e7ce-490d-fedd-a9495832769c.htm">CompositeShape</a>,
                            <a href="4b96607c-55a4-3f28-9c65-7c0fd9e29e29.htm">ConvexHullOfPoints</a>,
                            <a href="f93ecb1e-6075-3e54-676d-1aaa1351ee1a.htm">ConvexHullOfShapes</a>,
                            <a href="35c20f26-eab6-3f3a-9414-c8d142495646.htm">MinkowskiSumShape</a>,
                            <a href="28f243ab-2b08-0343-875b-2aa6f08b6c49.htm">TransformedShape</a>.
                            Here are a few examples of new shapes that can be created:
                        </p><ul><li>
                                A filled convex polygon or polyhedron can be defined with a
                                <a href="4b96607c-55a4-3f28-9c65-7c0fd9e29e29.htm">ConvexHullOfPoints</a>.
                            </li><li>
                                A "hammer" like shape can be created with
                                <a href="467bd69b-e7ce-490d-fedd-a9495832769c.htm">CompositeShape</a>
                                by combining a cylinder and a box.
                            </li><li>
                                The <a href="35c20f26-eab6-3f3a-9414-c8d142495646.htm">MinkowskiSumShape</a>
                                creates a new shape by "adding" existing shapes using an operation called
                                "Minkowski Sum". For example, the Minkowski Sum of a box and a sphere creates a box with rounded edges.
                            </li><li>
                                A <a href="28f243ab-2b08-0343-875b-2aa6f08b6c49.htm">TransformedShape</a>
                                can be used to create a shape that has an offset or rotation in local space.
                            </li></ul></div><h4 class="subHeading" id="Pose">Positioning an object</h4><div class="subsection"><p>
                            The type <a href="7c0b7cea-0ddc-0f21-0412-731af186b1c8.htm">Pose</a>
                            plays a central role in DigitalRune Geometry. The type is used to
                            describe the position and orientation of an object in the world. Whenever
                            transformations are applied to a geometric object, they are applied in the following order:
                        </p><ol><li><strong>Scale:</strong> First the scale is applied to the shape of a geometric object.
                            </li><li><strong>Rotate:</strong> Then the object is rotated around its local origin.
                            </li><li><strong>Translate:</strong> Then the object is moved to its position in world space.
                            </li></ol></div><h4 class="subHeading" id="GeometricObject">Geometric objects</h4><div class="subsection"><p>
                            The interface
                            <a href="14f1e616-5c53-aac7-dd8d-1a21f76ea472.htm">IGeometricObject</a>
                            defines an object that has a shape and a pose. Objects that implement
                            this interface can be used with DigitalRune Geometry. The type
                            <a href="a5223f58-7fb7-eb2c-2039-e1ef4444a19b.htm">GeometricObject</a>
                            is the default implementation of this interface. You can use
                            <a href="a5223f58-7fb7-eb2c-2039-e1ef4444a19b.htm">GeometricObject</a>
                            directly, or write your own classes that inherit from
                            <a href="a5223f58-7fb7-eb2c-2039-e1ef4444a19b.htm">GeometricObject</a>
                            or implement <a href="14f1e616-5c53-aac7-dd8d-1a21f76ea472.htm">IGeometricObject</a>.
                            Henceforth, we use the term <span class="term">geometric object</span> to refer
                            to an object with a shape and a pose.
                        </p></div></div><div class="collapsibleAreaRegion" id="shape"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Shape structures vs. shape classes</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
                    The namespace
                    <a href="61d03276-1512-3364-0b2b-7bdfe52dc6a5.htm">DigitalRune.Geometry.Shapes</a>
                    contains types for shapes. Specifically, there are structures for basic
                    shapes
                    (<a href="9794736d-4f59-6c97-9a2e-41b4921d66ce.htm">Aabb</a>,
                    <a href="fc0abaab-9195-ad0f-9085-22c180b805e0.htm">Line</a>,
                    <a href="2fe283ea-8bb7-af8a-8a6e-4c6d859142c6.htm">Ray</a>,
                    <a href="1bb3e753-da22-f217-bb98-97e9e17b42ed.htm">Triangle</a>
                    etc.) and classes for shapes
                    (<a href="e486f168-8f4d-534b-3cb0-4ed0b8dce951.htm">LineShape</a>,
                    <a href="7d868b78-8cb2-ee9f-9c67-2071ceb289a5.htm">LineSegmentShape</a>,
                    <a href="df7958cc-e30b-4c55-34e4-b6b5ddf7eaa2.htm">RayShape</a>,
                    <a href="3f5db3ea-6bd1-1aea-ecbd-32c6725883c8.htm">TriangleShape</a>
                    etc.).
                    The structure types are lightweight types that can be used for local computations
                    and when allocation of heap memory should be avoided.
                    The class types derive from the base class
                    <a href="efff4741-4f03-f106-4b42-5892eb21377e.htm">Shape</a>
                    and must be used when the shape of a
                    <a href="14f1e616-5c53-aac7-dd8d-1a21f76ea472.htm">IGeometricObject</a>
                    should be defined.
                </p></div><div class="collapsibleAreaRegion" id="Scale"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Using scaling</span></div><div id="ID2RBSection" class="collapsibleSection"><p><a href="14f1e616-5c53-aac7-dd8d-1a21f76ea472.htm">IGeometricObject</a>s
                    have a
                    <a href="00325ee3-7716-7b3c-457f-54879aa1070e.htm">Scale</a>
                    property that can be used to scale shapes. Scaling is always applied to
                    a shape before the
                    <a href="e010da76-289c-e617-97a7-53facea954ab.htm">Pose</a>
                    (position and orientation) is applied.
                </p><p>
                    Scaling can be applied to all shapes with following exceptions:
                </p><ul><li>
                        Non-uniform scaling cannot be used with
                        <a href="467bd69b-e7ce-490d-fedd-a9495832769c.htm">CompositeShape</a>s
                        if any of the
                        <a href="4907bad7-0721-33bf-df8e-7af07c8143cb.htm">Children</a>
                        of the composite shape is rotated.
                    </li><li><a href="de0e44ab-f22b-5188-3868-b5031adbd7e1.htm">HeightField</a>s
                        currently do not support a negative scaling.
                    </li></ul><p>
                    Sometimes positions and directions are given in the <em>local space</em>
                    of a geometric objects (for example
                    <a href="762ed010-04b8-7014-0999-52232435d5cd.htm">PositionALocal</a>
                    of a
                    <a href="bfe2ad9f-ea88-a6a7-0e57-b9f95c88edb5.htm">Contact</a>).
                    This <em>local space</em> is the space where the scaling
                    is already applied but the pose of the geometric object was not yet applied.
                    In other words, the local space of a geometric object and the world space
                    differ by the translation and rotation defined in the pose. The scaling is
                    treated as if it is part of the shape.
                </p><p>
                    For example: Geometric object A has a pose, a sphere shape with radius 2
                    and no scaling. Geometric object B has the same pose as A, a sphere shape
                    with radius 1 and a uniform scale of (2, 2, 2). The local space of A and
                    B is identical because the scale is treated as if it is a part of the shape.
                </p></div><div class="collapsibleAreaRegion" id="Memleaks"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Memory leaks in geometric objects</span></div><div id="ID3RBSection" class="collapsibleSection"><p>
                    Each
                    <a href="14f1e616-5c53-aac7-dd8d-1a21f76ea472.htm">IGeometricObject</a>
                    handles the
                    <a href="79484742-aa96-4253-f2b0-91b8b78b9bab.htm">Shape<span id="LSTEAC6CCAF_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTEAC6CCAF_0?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Changed</a>
                    event of its shape. That means, the shape has to store a reference to the geometric object.
                    This can lead to problems ("life extension bugs" a.k.a "memory leaks") because it may
                    prevent the geometric object from being garbage collected. For example, if several
                    geometric objects share the same shape, then the shape stores references to all
                    geometric objects. If one of the geometric objects is not needed anymore, the shape
                    might prevent it from being garbage collected.
                </p><p>
                    Therefore, if a shape is still needed but a geometric object is not needed anymore,
                    the
                    <a href="61073e8d-dbe2-0b24-420b-bd0048603623.htm">Shape</a>
                    property should be set to
                    <a href="0897835b-dca2-734d-d71a-eb21dd884aa9.htm">Shape<span id="LSTEAC6CCAF_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTEAC6CCAF_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Empty</a>
                    or
                    <a href="fb608198-c59e-60ff-f3b3-d9c51543cfea.htm">Shape<span id="LSTEAC6CCAF_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTEAC6CCAF_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Infinite</a>.
                    These are special immutable shapes that will never raise
                    <a href="79484742-aa96-4253-f2b0-91b8b78b9bab.htm">Shape<span id="LSTEAC6CCAF_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTEAC6CCAF_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Changed</a>
                    events and therefore they do not store a strong reference to the geometric object.
                    Those shapes will never prevent a geometric object from being garbage collected.
                </p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID4RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="e827b4ea-a130-a570-6c8a-cf52028464af.htm">DigitalRune.Geometry</a></div><div class="seeAlsoStyle"><a href="61d03276-1512-3364-0b2b-7bdfe52dc6a5.htm">DigitalRune.Geometry.Shapes</a></div><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="d22b1398-60bd-43a8-ac6e-b74375b11433.htm">Class Diagram of Namespace DigitalRune.Geometry</a></div><div class="seeAlsoStyle"><a href="639ca389-0db9-4ab0-86ee-676062d26b9a.htm">Class Diagram of Namespace DigitalRune.Geometry.Shapes</a></div></div></div></div><div id="pageFooter" class="pageFooter">Copyright (c) 2006-2016 DigitalRune GmbH. All rights reserved. (Last updated: 2016-03-10)<p><a href="http://www.digitalrune.com/" target="_blank">http://www.digitalrune.com/</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40digitalrune.com?Subject=DigitalRune Documentation">office@digitalrune.com</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>